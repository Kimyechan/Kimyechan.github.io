
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Java Server Developer">
    <title>Archives - Java Server Developer</title>
    <meta name="author" content="Yechan Kim">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Java Server Developer">
<meta property="og:url" content="https://kimyechan.github.io/archives/index.html">
<meta property="og:site_name" content="Java Server Developer">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="Yechan Kim">
<meta name="twitter:card" content="summary">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    

    

    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="2">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Java Server Developer
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="2">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="Search"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="http://stackoverflow.com/users"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Stack Overflow"
                        >
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://facebook.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://plus.google.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Google +"
                        >
                        <i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Google +</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/mailto"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="2"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/11/06/Algorithm-%EA%B0%80%EC%9E%A5-%EB%86%92%EC%9D%80-%ED%83%91-%EC%8C%93%EA%B8%B0/"
                            aria-label=": Algorithm-가장 높은 탑 쌓기"
                        >
                            Algorithm-가장 높은 탑 쌓기
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-11-06T21:18:59+09:00">
	
		    Nov 06, 2020
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    
                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/11/06/Algorithm-%EA%B0%80%EC%9E%A5-%EB%86%92%EC%9D%80-%ED%83%91-%EC%8C%93%EA%B8%B0/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/11/06/Algorithm-%EA%B8%B0%ED%83%80%EB%A6%AC%EC%8A%A4%ED%8A%B8/"
                            aria-label=": Algorithm-기타리스트"
                        >
                            Algorithm-기타리스트
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-11-06T20:49:30+09:00">
	
		    Nov 06, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Algorithm/">Algorithm</a>, <a class="category-link" href="/categories/Algorithm/Dynamic-Programming/">Dynamic Programming</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>백준 2655 : <a target="_blank" rel="noopener" href="https://www.acmicpc.net/problem/2655">문제링크</a></p>
<ul>
<li><p>문제유형 : </p>
<ul>
<li>동적 프로그래밍</li>
</ul>
</li>
<li><p>설명</p>
<ul>
<li><p>곡의 개수가 N, 볼륨의 최댓값은 M이므로 동적프로그래밍을 이용하여 시간 복잡도 O(NM)</p>
</li>
<li><p>핵심 아이디어: 모든 볼륨에 대하여 연주 가능 여부 계산</p>
</li>
<li><p>D[i][j+1] =&gt; i번째 노래일 때 j 크기의 볼륨으로 연주 가능한지 여부</p>
</li>
<li><p>노래를 순서대로 확인, 매 번 모든 크기의 볼륨을 검사</p>
</li>
<li><p>D[i][j - V[i]] = True if D[i-1][j] = True</p>
</li>
<li><p>D[i][j + V[i]] = True if D[i-1][j] = True</p>
<p>  <img src="https://user-images.githubusercontent.com/12459864/98364040-63a4ba80-2073-11eb-870e-3099a816f906.png" alt="스크린샷 2020-11-06 오후 9 02 20"></p>
</li>
</ul>
</li>
<li><p>풀이</p>
<pre><code class="python">    n, s, m = map(int, input().split())
    array = list(map(int, input().split()))

    dp = [[0] * (m + 1) for _ in range(n + 1)]
    dp[0][s] = 1

    for i in range(1, n + 1):
        for j in range(m + 1):
            if dp[i - 1][j] == 0:
                continue
            if j - array[i - 1] &gt;= 0:
                dp[i][j - array[i - 1]] = 1
            if j + array[i - 1] &lt;= m:
                dp[i][j + array[i - 1]] = 1

    result = -1
    for i in range(m, -1, -1):
        if dp[n][i] == 1:
            result = i
            break

    print(result)</code></pre>
</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/11/06/Algorithm-%EA%B8%B0%ED%83%80%EB%A6%AC%EC%8A%A4%ED%8A%B8/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/11/06/Algorithm-LCS/"
                            aria-label=": Algorithm-LCS"
                        >
                            Algorithm-LCS
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-11-06T18:18:12+09:00">
	
		    Nov 06, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Algorithm/">Algorithm</a>, <a class="category-link" href="/categories/Algorithm/Dynamic-Programming/">Dynamic Programming</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>백준 9251 : <a target="_blank" rel="noopener" href="https://www.acmicpc.net/problem/9251">문제링크</a></p>
<ul>
<li><p>문제유형 : </p>
<ul>
<li>동적 프로그래밍</li>
</ul>
</li>
<li><p>설명</p>
<ul>
<li>두 수열의 길이가 N 미만일 때, 시간 복잡도 O(N^2)으로 문제를 해결할 수 있습니다.</li>
<li>수열 각각을 X, Y라고 함</li>
<li>D[i][j] = X[0..i]와 Y[0..j]의 공통 부분 수열의 최대 길이</li>
<li>두 문자열의 길이를 조금씩 늘려가며 확인, 공통 부분 수열의 최대 길이를 계산</li>
<li>점화식<br>  <img src="https://user-images.githubusercontent.com/12459864/98350124-40bbdb80-205e-11eb-9ac4-a142ffce6a9e.png" alt="스크린샷 2020-11-06 오후 6 30 38"></li>
</ul>
</li>
<li><p>풀이</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">x = input()</span><br><span class="line">y = input()</span><br><span class="line"></span><br><span class="line">dp = [[<span class="number">0</span>] * (len(y) + <span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(len(x) + <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, len(x) + <span class="number">1</span>):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, len(y) + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> x[i - <span class="number">1</span>] == y[j - <span class="number">1</span>]:</span><br><span class="line">            dp[i][j] = dp[i - <span class="number">1</span>][j - <span class="number">1</span>] + <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            dp[i][j] = max(dp[i][j - <span class="number">1</span>], dp[i - <span class="number">1</span>][j])</span><br></pre></td></tr></table></figure>
</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/11/06/Algorithm-LCS/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/11/05/Algorithm-%EA%B0%80%EC%9E%A5-%EA%B8%B4-%EC%A6%9D%EA%B0%80%ED%95%98%EB%8A%94-%EB%B6%80%EB%B6%84-%EC%88%98%EC%97%B4/"
                            aria-label=": Algorithm-가장 긴 증가하는 부분 수열"
                        >
                            Algorithm-가장 긴 증가하는 부분 수열
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-11-05T21:13:37+09:00">
	
		    Nov 05, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Algorithm/">Algorithm</a>, <a class="category-link" href="/categories/Algorithm/Dynamic-Programming/">Dynamic Programming</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>백준 11053 : <a target="_blank" rel="noopener" href="https://www.acmicpc.net/problem/11053">문제링크</a></p>
<ul>
<li><p>문제유형 : </p>
<ul>
<li><p>탐색</p>
</li>
<li><p>동적 프로그래밍</p>
</li>
</ul>
</li>
<li><p>설명</p>
<ul>
<li><p>수열의 크기가 N일 때, 기본적으로 동적 프로그래밍 알고리즘으로 O(N^2)으로 해결</p>
</li>
<li><p>D[i]는 array[i]를 마지막 원소로 가지는 부분 수열의 최대 길이</p>
</li>
<li><p>모든 0 &lt;= j &lt; i에 대하여, D[i] = max(D[i], D[j] + 1) if array[j] &lt; array[i]</p>
</li>
<li><p>N = 6 일 때</p>
<p>  <img src="https://user-images.githubusercontent.com/12459864/98241365-304c2800-1fae-11eb-9e59-90dcfaa59106.png" alt="스크린샷 2020-11-05 오후 9 30 40"></p>
</li>
</ul>
</li>
<li><p>풀이</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">n = int(input())</span><br><span class="line">array = list(map, input().split())</span><br><span class="line">dp = [<span class="number">1</span>] * n</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n):</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">0</span>, i):</span><br><span class="line">        <span class="keyword">if</span> array[j] &lt; array[i]:</span><br><span class="line">            dp[i] = max(dp[i], dp[j] + <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">print(max(dp))</span><br></pre></td></tr></table></figure>
</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/11/05/Algorithm-%EA%B0%80%EC%9E%A5-%EA%B8%B4-%EC%A6%9D%EA%B0%80%ED%95%98%EB%8A%94-%EB%B6%80%EB%B6%84-%EC%88%98%EC%97%B4/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/11/05/Algorithm-%ED%8F%89%EB%B2%94%ED%95%9C-%EB%B0%B0%EB%82%AD/"
                            aria-label=": Algorithm-평범한 배낭"
                        >
                            Algorithm-평범한 배낭
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-11-05T20:49:22+09:00">
	
		    Nov 05, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Algorithm/">Algorithm</a>, <a class="category-link" href="/categories/Algorithm/Dynamic-Programming/">Dynamic Programming</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>백준 12865 : <a target="_blank" rel="noopener" href="https://www.acmicpc.net/problem/12865">문제링크</a></p>
<ul>
<li><p>문제유형 : </p>
<ul>
<li><p>탐색</p>
</li>
<li><p>동적 프로그래밍</p>
</li>
</ul>
</li>
<li><p>설명</p>
<ul>
<li><p>물품의 수 N, 배낭에 담을 수 있는 무게 K</p>
</li>
<li><p>동적 프로그래밍을 이용하여 시간 복잡도(NK)</p>
</li>
<li><p>핵심 아이디어: 모든 무게에 대하여 최대 가치를 저장하기</p>
</li>
<li><p>D[i][j] = 배낭에 넣은 물품의 무게 합이 j일 때 얻을 수 있는 최대 가치</p>
</li>
<li><p>각 물품의 번호 i에 따라서 최대 가치 테이블 D[i][j]를 갱신하여 문제를 해결</p>
</li>
<li><p>점화식<br>  <img src="https://user-images.githubusercontent.com/12459864/98239474-59b78480-1fab-11eb-8271-ff0b8c083324.png" alt="스크린샷 2020-11-05 오후 9 09 54"></p>
</li>
<li><p>N = 4, K = 7 일 때<br>  <img src="https://user-images.githubusercontent.com/12459864/98239557-7b187080-1fab-11eb-88c0-ba2336ac8757.png" alt="스크린샷 2020-11-05 오후 9 11 23"></p>
</li>
</ul>
</li>
<li><p>풀이</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">n, k = map(int, input().split())</span><br><span class="line">dp = [[<span class="number">0</span>] * (k + <span class="number">1</span>) <span class="keyword">for</span> _ <span class="keyword">in</span> range(n + <span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>, n + <span class="number">1</span>):</span><br><span class="line">    weight, value = map(int, input().split())</span><br><span class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">1</span>, k + <span class="number">1</span>):</span><br><span class="line">        <span class="keyword">if</span> j &lt; weight:</span><br><span class="line">            dp[i][j] = dp[i - <span class="number">1</span>][j]</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            dp[i][j] = max(dp[i - <span class="number">1</span>][j], dp[i - <span class="number">1</span>][j - weight] + value)</span><br><span class="line"></span><br><span class="line">print(dp[n][k])</span><br></pre></td></tr></table></figure>
</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/11/05/Algorithm-%ED%8F%89%EB%B2%94%ED%95%9C-%EB%B0%B0%EB%82%AD/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/10/30/Algorithm-01%ED%83%80%EC%9D%BC/"
                            aria-label=": Algorithm-01타일"
                        >
                            Algorithm-01타일
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-10-30T19:14:51+09:00">
	
		    Oct 30, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Algorithm/">Algorithm</a>, <a class="category-link" href="/categories/Algorithm/DynamicProgramming/">DynamicProgramming</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>백준 1904 : <a target="_blank" rel="noopener" href="https://www.acmicpc.net/problem/1904">문제링크</a></p>
<ul>
<li><p>문제유형 : </p>
<ul>
<li>동적 프로그래밍</li>
</ul>
</li>
<li><p>설명</p>
<ul>
<li><p>동적 프로그래밍 문제를 풀기 위해서는 점화식(인접한 항들 사이의 관계식)을 세워야 한다.</p>
<p>  <img src="https://user-images.githubusercontent.com/12459864/97693770-ffb74a80-1ae4-11eb-9ad2-d56235883a3a.png" alt="스크린샷 2020-10-30 오후 7 19 58"></p>
</li>
<li><p>D[i] = 수열의 길이가 i일 때의 경우에 수</p>
</li>
<li><p>D[i] = D[i-1] + D[i-2]</p>
</li>
</ul>
</li>
<li><p>풀이</p>
  <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">n = int(input())</span><br><span class="line"></span><br><span class="line">dp = [<span class="number">0</span>] * <span class="number">1000001</span></span><br><span class="line">dp[<span class="number">1</span>] = <span class="number">1</span></span><br><span class="line">dp[<span class="number">2</span>] = <span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">3</span>, n+<span class="number">1</span>)</span><br><span class="line">    dp[i] = (dp[i - <span class="number">2</span>] + dp[i - <span class="number">1</span>]) % <span class="number">15746</span></span><br><span class="line"></span><br><span class="line">print(d[[n]])</span><br></pre></td></tr></table></figure></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/10/30/Algorithm-01%ED%83%80%EC%9D%BC/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/10/30/Java-Advanced11-RegularExpressions/"
                            aria-label=": Java-Advanced11-RegularExpressions"
                        >
                            Java-Advanced11-RegularExpressions
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-10-30T18:09:26+09:00">
	
		    Oct 30, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>, <a class="category-link" href="/categories/Java/Java-Advanced/">Java Advanced</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="정규표현식-Regular-Expression"><a href="#정규표현식-Regular-Expression" class="headerlink" title="정규표현식 (Regular Expression)"></a>정규표현식 (Regular Expression)</h1><h2 id="정규표현식"><a href="#정규표현식" class="headerlink" title="정규표현식"></a>정규표현식</h2><ul>
<li>특정 조건에 맞는 문자열을 검색/치환하는 패턴 기반의 식</li>
<li>이메일, 전화번호 등 특정한 형식에 맞는지 validation하는 데에 사용</li>
</ul>
<h2 id="정규표현식-표현-방법"><a href="#정규표현식-표현-방법" class="headerlink" title="정규표현식 표현 방법"></a>정규표현식 표현 방법</h2><ul>
<li><p>정규 표현식의 기본 작성 방식</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;/패턴/[플래그(Opt.)]&quot;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>기본 메타 문자</p>
<table>
<thead>
<tr>
<th>메타 문자</th>
<th>의미</th>
</tr>
</thead>
<tbody><tr>
<td><code>^x</code></td>
<td>x로 시작</td>
</tr>
<tr>
<td><code>x$</code></td>
<td>x로 끝</td>
</tr>
<tr>
<td><code>.x</code></td>
<td>x앞에 하나의 문자가 있음</td>
</tr>
<tr>
<td><code>x+</code></td>
<td>x가 1번 이상 반복</td>
</tr>
<tr>
<td><code>x?</code></td>
<td>x가 있거나 없음</td>
</tr>
<tr>
<td><code>x*</code></td>
<td>x가 0번 이상 반복</td>
</tr>
<tr>
<td>`x</td>
<td>y`</td>
</tr>
</tbody></table>
</li>
<li><p>괄호의 활용</p>
<table>
<thead>
<tr>
<th>regexp</th>
<th>의미</th>
</tr>
</thead>
<tbody><tr>
<td><code>(xy)</code></td>
<td>괄호 안의 내용을 그룹화</td>
</tr>
<tr>
<td><code>x&#123;n&#125;</code></td>
<td>n번 반복됨</td>
</tr>
<tr>
<td><code>x&#123;n,&#125;</code></td>
<td>n번 이상 반복됨</td>
</tr>
<tr>
<td><code>x&#123;n, m&#125;</code></td>
<td>n번 이상, m번 이하 반복됨</td>
</tr>
<tr>
<td><code>[xy]</code></td>
<td>x 또는 y</td>
</tr>
<tr>
<td><code>[a-z]</code></td>
<td>알파벳 소문자 (a~z)</td>
</tr>
<tr>
<td><code>[0-9]</code></td>
<td>숫자</td>
</tr>
<tr>
<td><code>[가-힣]</code></td>
<td>한글</td>
</tr>
<tr>
<td><code>[^x]</code></td>
<td>x가 아닌 것</td>
</tr>
<tr>
<td><code>[^0-9]</code></td>
<td>숫자가 아닌 것</td>
</tr>
</tbody></table>
</li>
<li><p><code>\</code> 축약 문자 </p>
<table>
<thead>
<tr>
<th>regexp</th>
<th>의미</th>
</tr>
</thead>
<tbody><tr>
<td><code>\^</code>, <code>\.</code>, …</td>
<td><code>\</code> 뒤에 나오는 문자를 문자로 처리</td>
</tr>
<tr>
<td><code>\b</code></td>
<td>단어의 경계를 찾는다.</td>
</tr>
<tr>
<td><code>\B</code></td>
<td>단어의 경계가 아닌 것을 찾는다.</td>
</tr>
<tr>
<td><code>\d</code></td>
<td>숫자를 찾는다.</td>
</tr>
<tr>
<td><code>\D</code></td>
<td>숫자가 아닌 것을 찾는다.</td>
</tr>
<tr>
<td><code>\s</code></td>
<td>공백 문자를 찾는다.</td>
</tr>
<tr>
<td><code>\S</code></td>
<td>공백 문자가 아닌 것을 찾는다.</td>
</tr>
<tr>
<td><code>\w</code></td>
<td><code>[a-zA-Z0-9_]</code></td>
</tr>
<tr>
<td><code>\W</code></td>
<td><code>[^a-zA-Z0-9_]</code></td>
</tr>
</tbody></table>
<p><code>JAVA에서는 \\\ 처럼 입력해야 \\처럼 동작한다</code></p>
</li>
<li><p>유용한 정규식 예</p>
<ul>
<li>한글 이름 : <code>^[가-힣]&#123;2,5&#125;$</code></li>
<li>핸드폰 번호: <code>^01(0|1|2|6|9)[-\s]?\d&#123;3,4&#125;[-\s]?\d&#123;4&#125;$</code></li>
<li>이메일 주소: <code>^[\w\.-]&#123;1,64&#125;@[\w\.-]&#123;1,252&#125;\.\w&#123;2,4&#125;$</code></li>
</ul>
</li>
</ul>
<h2 id="Flag"><a href="#Flag" class="headerlink" title="Flag"></a>Flag</h2><table>
<thead>
<tr>
<th>Flag</th>
<th>기능</th>
</tr>
</thead>
<tbody><tr>
<td><code>g</code></td>
<td>문자열 내 모든 패턴을 찾음</td>
</tr>
<tr>
<td><code>i</code></td>
<td>대소문자를 구분하지 않음</td>
</tr>
<tr>
<td><code>m</code></td>
<td>문자열의 모든 줄에서 찾음</td>
</tr>
</tbody></table>
<h2 id="정규표현식을-사용하는-클래스"><a href="#정규표현식을-사용하는-클래스" class="headerlink" title="정규표현식을 사용하는 클래스"></a>정규표현식을 사용하는 클래스</h2><h3 id="Pattern-클래스"><a href="#Pattern-클래스" class="headerlink" title="Pattern 클래스"></a>Pattern 클래스</h3><ul>
<li><p>정규식의 컴파일된 표현 입니다(정규식을 적용 가능하도록 컴파일해서 가지고 있습니다).</p>
</li>
<li><p>Pattern 클래스는 공개된 생성자를 제공하지 않습니다.</p>
</li>
<li><p>패턴을 생성하려면 Pattern객체를 반환하는 정적 compile 메소드를 호출해야 합니다.</p>
</li>
<li><p>이 메소드는 첫 번째 인자로 정규식 문자열을 받아 들입니다.</p>
<table>
<thead>
<tr>
<th>메소드</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td><code>public static Pattern compile(String regex)</code></td>
<td>Pattern 객체를 생성</td>
</tr>
<tr>
<td><code>public Matcher matcher(CharSequence input)</code></td>
<td>입력을 분석하는 Matcher 객체 생성</td>
</tr>
<tr>
<td><code>public static boolean matches(String regex, CharSequence input)</code></td>
<td>입력이 regexp에 해당하는지 판단</td>
</tr>
</tbody></table>
</li>
</ul>
<h3 id="Matcher-클래스"><a href="#Matcher-클래스" class="headerlink" title="Matcher 클래스"></a>Matcher 클래스</h3><ul>
<li><p>패턴을 해석하고 입력 문자열에 대해 일치 작업을 수행하는 엔진입니다.</p>
</li>
<li><p>Pattern 클래스와 마찬가지로 Matcher는 어떤 공개된 생성자도 정의하고 있지 않습니다.</p>
</li>
<li><p>Matcher객체는 Pattern 객체의 matcher 메소드를 호출해서 얻습니다.</p>
<table>
<thead>
<tr>
<th>메소드</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td><code>find()</code></td>
<td>정규표현식에 부합되는 내용이 문자열에 포함되어 있는지 반환. 이전 검색 위치부터 이어서 검색.</td>
</tr>
<tr>
<td><code>start()</code></td>
<td>패턴에 부합되는 요소의 시작 인덱스 반환</td>
</tr>
<tr>
<td><code>end()</code></td>
<td>패턴에 부합되는 요소가 끝나는 위치 + 1을 반환</td>
</tr>
<tr>
<td><code>matches()</code></td>
<td>문자열 전체가 정규표현식에 일치하는지 반환</td>
</tr>
<tr>
<td><code>lookingAt()</code></td>
<td>비교하려는 문자열이 정규표현식으로 시작하는지 반환. 0번 인덱스부터 검색.</td>
</tr>
<tr>
<td><code>replaceFirst()</code></td>
<td>일치하는 첫 패턴을 문자열로 대체</td>
</tr>
<tr>
<td><code>replaceAll()</code></td>
<td>일치하는 모든 패턴을 문자열로 대체</td>
</tr>
<tr>
<td><code>reset()</code></td>
<td>Matcher의 정보를 리셋하여 0번 인덱스부터 다시 검색</td>
</tr>
</tbody></table>
</li>
</ul>
<h3 id="정규식-캡쳐-그룹"><a href="#정규식-캡쳐-그룹" class="headerlink" title="정규식 캡쳐 그룹"></a>정규식 캡쳐 그룹</h3><ul>
<li><p>정규표현식에서 캡쳐링 그룹은 괄호로 둘러싼 영역이다. </p>
</li>
<li><p>사용 예</p>
<ul>
<li><p>순서로 그룹 가져오기</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Pattern pattern2 = Pattern.compile(<span class="string">&quot;^\\w+):(\\w+)\\.(\\w+)$&quot;</span>);</span><br><span class="line">Matcher matcher2 = pattern2.matcher(<span class="string">&quot;filename:temp.png&quot;</span>);</span><br><span class="line"></span><br><span class="line">matcher2.find();</span><br><span class="line">System.out.println(matcher2.group()); <span class="comment">// 매칭된 전체가 출력</span></span><br><span class="line">System.out.println(matcher2.group(<span class="number">0</span>)); <span class="comment">// 매칭된 전체가 출력</span></span><br><span class="line">System.out.println(matcher2.group(<span class="number">1</span>)); <span class="comment">// 첫번째 그룹</span></span><br><span class="line">System.out.println(matcher2.group(<span class="number">2</span>));</span><br><span class="line">System.out.println(matcher2.group(<span class="number">3</span>));</span><br></pre></td></tr></table></figure>
</li>
<li><p>Name으로 그룹 가져오기</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"> Pattern pattern2 = Pattern.compile(<span class="string">&quot;^(?&lt;field&gt;\\w+):(?&lt;name&gt;\\w+)\\.(?&lt;ext&gt;\\w+)$&quot;</span>);</span><br><span class="line">Matcher matcher2 = pattern2.matcher(<span class="string">&quot;filename:temp.png&quot;</span>);</span><br><span class="line"></span><br><span class="line">matcher2.find();</span><br><span class="line"></span><br><span class="line">System.out.println(matcher2.group(<span class="string">&quot;field&quot;</span>)); <span class="comment">// name group</span></span><br><span class="line">System.out.println(matcher2.group(<span class="string">&quot;name&quot;</span>));</span><br><span class="line">System.out.println(matcher2.group(<span class="string">&quot;ext&quot;</span>));</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/10/30/Java-Advanced11-RegularExpressions/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/10/29/DATABASE-Crontab/"
                            aria-label=": DATABASE-Crontab"
                        >
                            DATABASE-Crontab
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-10-29T21:31:52+09:00">
	
		    Oct 29, 2020
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Crontab"><a href="#Crontab" class="headerlink" title="Crontab"></a>Crontab</h1><ul>
<li><p>유닉스 OS 계열에서 특정 시간에 특정 작업을 해야하는 경우 사용하는 스케쥴러입니다.</p>
</li>
<li><p>crontab basic</p>
<ul>
<li><p>스케쥴 설정</p>
<p>  아래의 커멘드를 입력하면 스케줄을 설정할수 있는 vi 에디터 페이지가 생성된다. 여기에 어떤 주기로 어떤 파일을 실행할지에 대한 리스트를 작성해주면 된다.</p>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> crontab -e</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>스케쥴 리스트 확인</p>
<p>  현재 crontab의 스케쥴을 확인할 수 있다.</p>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> crontab -l</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>주기 설정</p>
  <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">vi time.py</span><br><span class="line"></span><br><span class="line">import datetime</span><br><span class="line">today = datetime.datetime.now()</span><br><span class="line">print(str(today))</span><br></pre></td></tr></table></figure>

<ul>
<li><p>crontab -e 설정</p>
</li>
<li><p>*  *  *  *  * -&gt;<br>분(0-59) | 시간(0-23) | 일(1-31) | 월(1-12) | 요일(0-7)</p>
<ul>
<li><p>요일에서 0과 7은 일요일</p>
</li>
<li><p>2분 간격으로 실행</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*&#x2F;2 * * * * python3 &#x2F;home&#x2F;ubuntu&#x2F;time.py &gt;&gt; time.txt</span><br></pre></td></tr></table></figure></li>
<li><p>매시 10분에 실행</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10 * * * * python3 &#x2F;home&#x2F;ubuntu&#x2F;time.py &gt;&gt; time.txt</span><br></pre></td></tr></table></figure></li>
<li><p>매시 10분과 20분에 실행</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10,20 * * * * python3 &#x2F;home&#x2F;ubuntu&#x2F;time.py &gt;&gt; time.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>매일 5시 10분과 20분에 실행</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10,20 5 * * * python3 &#x2F;home&#x2F;ubuntu&#x2F;time.py &gt;&gt; time.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>일요일 5시 10분과 20분에 실행</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">10,20 5 * * 0 python3 &#x2F;home&#x2F;ubuntu&#x2F;time.py &gt;&gt; time.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>5시에서 10시까지 매시에 5분마다 time.py를 실행하고 결과를 time.txt에 저장</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*&#x2F;5 5-10 * * 0 python3 &#x2F;home&#x2F;ubuntu&#x2F;time.py &gt;&gt; time.txt</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
<li><p>time zone 변경</p>
<p>  타임존 변경</p>
<ul>
<li><p>현재 사용 시간 확인</p>
<p>  $ timedatectl</p>
</li>
<li><p>사용하는 파일 심볼릭 링크확인</p>
<p>  $ ls -l /etc/localtime</p>
</li>
<li><p>사용 할수 있는 타임존 확인</p>
<p>  $ timedatectl list-timezones | grep Asia</p>
</li>
<li><p>타임존 변경</p>
<p>  $ sudo timedatectl set-timezone Asia/Seoul</p>
</li>
<li><p>심볼릭 링크 수정</p>
<p>  $ sudo unlink /etc/localtime</p>
<p>  $ sudo ln -s /usr/share/zoneinfo/Asia/Seoul /etc/localtime</p>
</li>
</ul>
</li>
<li><p>vim 에디터 인코딩 변경</p>
<p>  $ vi .vimrc</p>
<p>  set encoding=utf-8</p>
</li>
<li><p>crontab 로그 확인</p>
<p>  아래의 명령으로 crontab의 시스템 로그를 확인 할수 있습니다.</p>
<p>  $ grep CRON /var/log/syslog</p>
</li>
<li><p>crontab 에러 확인 및 해결</p>
<p>  에러가 발생하면 아래와 같은 에러 로그를 확인할수 있습니다.</p>
<p>  Mar 4 07:42:01 ip-172-31-3-64 CRON[7494]: (CRON) info (No MTA installed,<br>  discarding output)</p>
</li>
</ul>
<pre><code>- MTA : Mail Transfer Agent
- 에러 메시지 확인하는 방법 1
    - $ sudo apt-get install postfix
    - $ cat /var/mail/ubuntu
- 에러 메시지 확인하는 방법 2
    - $ sudo apt install mailutils
    - $ mail
- crontab에서 실행되는 python 환경

    - crontab 에서는 .bash_profile이 실행되지 않기때문에 pyenv 환경이 적용되지 않습니다.

        &lt;!--hexoPostRenderEscape:&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;vi version.py&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;import sys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;print(sys.version.split(&amp;quot; &amp;quot;)[0])&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;:hexoPostRenderEscape--&gt;

        &lt;!--hexoPostRenderEscape:&lt;figure class=&quot;highlight shell&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;crontab -e&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;\* \* \* \* \* python /home/ubuntu/version.py &amp;gt;&amp;gt; version.txt&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;:hexoPostRenderEscape--&gt;

- pyenv 환경에 있는 python으로 실행

    -  직접 python 경로 입력

       \* \* \* \* \* /home/ubuntu/.pyenv/versions/python3/bin/python /home/ubuntu/version.py &gt;&gt; version.txt

    - PATH 설정

      PATH=/usr/local/bin/:/sbin:/bin:/usr/sbin:/home/ubuntu/.pyenv/versions/python3/bin

      \* \* \* \* \* python /home/ubuntu/version.py &gt;&gt; version.txt</code></pre>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/10/29/DATABASE-Crontab/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/10/29/DATABASE-NoSQL-MongoDB/"
                            aria-label=": DATABASE-NoSQL(MongoDB)"
                        >
                            DATABASE-NoSQL(MongoDB)
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-10-29T20:39:35+09:00">
	
		    Oct 29, 2020
    	
    </time>
    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="MongoDB"><a href="#MongoDB" class="headerlink" title="MongoDB"></a>MongoDB</h1><h2 id="MongoDB-Setting"><a href="#MongoDB-Setting" class="headerlink" title="MongoDB Setting"></a>MongoDB Setting</h2><ol>
<li><p>MongoDB 설치 및 설정</p>
 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">sudo apt update -y</span><br><span class="line">sudo apt upgrade -y</span><br><span class="line">sudo apt install -y mongodb</span><br><span class="line">sudo systemctl status mongodb</span><br><span class="line">sudo vi /etc/mongodb.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> bind_ip = 0.0.0.0</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> auth = <span class="literal">true</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 패스워드 설정</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> mongo</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> use admin</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> db.createUser(&#123; user: <span class="string">&quot;rada&quot;</span>, <span class="built_in">pwd</span>: <span class="string">&quot;radapw&quot;</span>, roles: [ <span class="string">&quot;root&quot;</span> ] &#125;)</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> quit()</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sudo systemctl restart mongodb</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> aws 인스턴스 27017 포트 접속 허용</span></span><br></pre></td></tr></table></figure>

<p> mongo 명령어를 입력하면 mongo shell에 접속됩니다.</p>
</li>
<li><p>Install Robomongo</p>
<p> <a target="_blank" rel="noopener" href="https://robomongo.org/">https://robomongo.org/</a> 페이지에서 경로에서 ROBO 3T 다운로드 후 설치 합니다.</p>
</li>
<li><p>Connection</p>
<p> MongoDB Connections에서 ip를 입력하여 서버의 mongoDB에 접속합니다.</p>
</li>
</ol>
<hr>
<h2 id="문법"><a href="#문법" class="headerlink" title="문법"></a>문법</h2><p>ref : <a target="_blank" rel="noopener" href="https://docs.mongodb.com/v3.6/reference/">https://docs.mongodb.com/v3.6/reference/</a></p>
<ul>
<li><p>Create Database</p>
<ul>
<li><p>mongo 라는 이름의 데이터 베이스 생성</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> mongo</span><br></pre></td></tr></table></figure>
</li>
<li><p>현재 사용중인 데이터 베이스 확인</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db</span><br></pre></td></tr></table></figure>
</li>
<li><p>database list 확인</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> dbs</span><br></pre></td></tr></table></figure>
<ul>
<li>데이터 베에스를 생성후에 최소 1개이상의 document를 추가해야 생성된 데이터 베이스가 보인다</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>- document 생성
    &lt;!--hexoPostRenderEscape:&lt;figure class=&quot;highlight sql&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;use&lt;/span&gt; mongo&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;db.user.insert(&amp;#123;&lt;span class=&quot;string&quot;&gt;&amp;quot;name&amp;quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&amp;quot;alice&amp;quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;quot;age&amp;quot;&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;20&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;&amp;quot;email&amp;quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;&amp;quot;alice@gmail.com&amp;quot;&lt;/span&gt;&amp;#125;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;:hexoPostRenderEscape--&gt;</code></pre>
<ul>
<li><p>Delete Database</p>
<ul>
<li>현재 사용중인 데이터 베이스 삭제  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.dropDatabase()</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>Create Collection</p>
<p>  refer <a target="_blank" rel="noopener" href="https://docs.mongodb.com/v3.6/reference/method/db.createCollection/">https://docs.mongodb.com/v3.6/reference/method/db.createCollection/</a></p>
<ul>
<li><p>syntax</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.createCollection(collection 이름, [option])</span><br></pre></td></tr></table></figure>
</li>
<li><p>option</p>
<ul>
<li>capped : true로 설정하면 collection의 최대 용량을 설정 (최대 용량의 크기는 size 옵션으로 설정), 설정된 최대용량 이상으로 데이터가 입력되면 오래된 데이터 부터 자동으로 삭제됩니다.</li>
<li>autoIndex : true로 설정하면 _id 필드에 index가 자동으로 생성됩니다.</li>
<li>size : 숫자 데이터를 사용하며 collection의 최대 사이즈를 byte 단위로 지정</li>
<li>max : 숫자 데이터를 사용하며 최대 document 갯수를 설정</li>
</ul>
</li>
<li><p>user 컬렉션을 생성</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.createCollection(&quot;user&quot;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>autoIndex와 max 옵션을 설정하여 info 컬렉션을 생성</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.createCollection(&quot;info1&quot;, &#123; autoIndexId: true, capped: true, size: 500, max:5 &#125;)</span><br><span class="line">db.createCollection(&quot;info2&quot;, &#123; autoIndexId: true, capped: true, size: 50, max:5 &#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>createCollection을 사용하지 않고 article 컬렉션을 생성</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.articles.insert( &#123;&quot;title&quot;:&quot;data science&quot;, &quot;contents&quot;:&quot;mongodb&quot; &#125; )</span><br></pre></td></tr></table></figure>
</li>
<li><p>컬렉션 리스트 확인</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> collections</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Delete Collection</p>
<ul>
<li>articles 컬렉션 삭제  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.articles.drop()</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Make Document</p>
<ul>
<li><p>syntax</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.&lt;collection_name&gt;.insert(&lt;document&gt;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>info 컬렉션에 document 추가</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.info1.insert(&#123; &quot;subject&quot;:&quot;python&quot;, &quot;level&quot;:3 &#125;)</span><br><span class="line">db.info1.insert(&#123; &quot;subject&quot;:&quot;web&quot;, &quot;level&quot;:1 &#125;)</span><br><span class="line">db.info1.insert(&#123; &quot;subject&quot;:&quot;sql&quot;, &quot;level&quot;:2 &#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>한번에 여러개의 document 추가</p>
<ul>
<li><p>max:5 옵션 제한에 걸려 5개의 데이터가 info1에 들어간다.</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">db.info1.insert( [</span><br><span class="line">&#123; &quot;subject&quot;:&quot;python&quot;, &quot;level&quot;:3 &#125;,</span><br><span class="line">&#123; &quot;subject&quot;:&quot;web&quot;, &quot;level&quot;:1 &#125;,</span><br><span class="line">&#123; &quot;subject&quot;:&quot;sql&quot;, &quot;level&quot;:2 &#125;,</span><br><span class="line">&#123; &quot;subject&quot;:&quot;python&quot;, &quot;level&quot;:3 &#125;,</span><br><span class="line">&#123; &quot;subject&quot;:&quot;web&quot;, &quot;level&quot;:1 &#125;,</span><br><span class="line">&#123; &quot;subject&quot;:&quot;sql&quot;, &quot;level&quot;:2 &#125;,</span><br><span class="line">])</span><br></pre></td></tr></table></figure>
</li>
<li><p>size:50 옵션 제한에 걸려 4개의 데이터가 info2에 입력된다.</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">db.info2.insert( [</span><br><span class="line">&#123; &quot;subject&quot;:&quot;python&quot;, &quot;level&quot;:3 &#125;,</span><br><span class="line">&#123; &quot;subject&quot;:&quot;web&quot;, &quot;level&quot;:1 &#125;,</span><br><span class="line">&#123; &quot;subject&quot;:&quot;sql&quot;, &quot;level&quot;:2 &#125;,</span><br><span class="line">&#123; &quot;subject&quot;:&quot;python&quot;, &quot;level&quot;:3 &#125;,</span><br><span class="line">&#123; &quot;subject&quot;:&quot;web&quot;, &quot;level&quot;:1 &#125;,</span><br><span class="line">])</span><br></pre></td></tr></table></figure>
</li>
<li><p>info collection 생성하면서 document 추가</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">db.info.insert( [</span><br><span class="line">&#123; &quot;subject&quot;:&quot;python&quot;, &quot;level&quot;:3 &#125;,</span><br><span class="line">&#123; &quot;subject&quot;:&quot;web&quot;, &quot;level&quot;:1 &#125;,</span><br><span class="line">&#123; &quot;subject&quot;:&quot;sql&quot;, &quot;level&quot;:2 &#125;,</span><br><span class="line">&#123; &quot;subject&quot;:&quot;java&quot;, &quot;level&quot;:3 &#125;,</span><br><span class="line">&#123; &quot;subject&quot;:&quot;html&quot;, &quot;level&quot;:1 &#125;,</span><br><span class="line">&#123; &quot;subject&quot;:&quot;css&quot;, &quot;level&quot;:2 &#125;,</span><br><span class="line">])</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Delete Document</p>
<ul>
<li>level2인 데이터 삭제 : 제약조건이 걸려있는 컬렉션의 도큐먼트는 삭제가 안됩니다.  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.remove( &#123;level:2&#125; )</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Find</p>
<p>  ref : <a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/reference/method/db.collection.find/index.html">https://docs.mongodb.com/manual/reference/method/db.collection.find/index.html</a></p>
<ul>
<li><p>syntax</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection.find(query, projection)</span><br></pre></td></tr></table></figure>
<p>  query : document 조회 조건을 설정. 모든 document를 조회 할때는 ({})를 사용</p>
<p>  projection : document를 조회할때 보여지는 필드(컬럼)를 정의</p>
</li>
<li><p>query</p>
<ul>
<li><p>기본 document 조회</p>
<ul>
<li><p>info 컬렉션에 있는 모든 document 조회</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">db.info.find()</span><br><span class="line">db.getCollection(&#x27;info&#x27;).find(&#123;&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>subject가 python인 document 조회</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.find(&#123;&quot;subject&quot;: &quot;python&quot;&#125;)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>비교 연산자</p>
<p>  ref : <a target="_blank" rel="noopener" href="https://docs.mongodb.com/v3.6/reference/operator/query/">https://docs.mongodb.com/v3.6/reference/operator/query/</a></p>
<ul>
<li><p>level이 2 이하인 document를 조회</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.find(&#123;&quot;level&quot;: &#123;$lte: 2&#125; &#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>level이 3 이상인 document를 조회</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.find(&#123;&quot;level&quot;: &#123;$gte: 3&#125; &#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>subject가 java와 python을 포함하는 document 조회</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.find( &#123;&quot;subject&quot;: &#123;$in: [&quot;java&quot;, &quot;python&quot;]&#125;&#125; )</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>논리 연산자</p>
<ol>
<li>$or : 조건중 하나라도 true이면 true</li>
<li>$and : 모든 조건이 true이면 true</li>
<li>$not : 조건중 하나라도 false이면 true</li>
<li>$nor : 모든 조건이 false이면 true (or와 반대 개념)</li>
</ol>
<ul>
<li><p>subject가 python이고 level이 3이상인 document 조회</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.find(&#123; $and: [ &#123; &quot;subject&quot;:&quot;python&quot; &#125;, &#123; &quot;level&quot;: &#123;$gte: 3&#125; &#125; ] &#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>subject가 python이아니고 level이 1이하가 아닌 document 조회</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.find(&#123; $nor: [ &#123; &quot;subject&quot;:&quot;python&quot; &#125;, &#123; &quot;level&quot;: &#123;$lte: 1&#125; &#125; ] &#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>level이 2보다 크지 않은 document 조회 (2 포함)</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.find(&#123; &quot;level&quot;: &#123; $not: &#123;$gt: 2&#125; &#125; &#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>$where</p>
<ul>
<li><p>$where 연산자를 사용하면 자바스크립트 표현식 사용이 가능합니다.</p>
</li>
<li><p>level이 1인 document 조회</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.find( &#123; $where: &quot;this.level == 1&quot;&#125; )</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
<li><p>projection</p>
<p>  document를 조회할때 보여지는 필드(컬럼)를 정의합니다.</p>
<ul>
<li><p>Basic</p>
</li>
<li><p>subject와 comments만 출력되도록 find</p>
<ul>
<li>설정을 true 값을 설정하던가 false 값을 설정합니다. ( _id는 따로 설정을 안하면 true )<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.info.find(&#123;&#125;,&#123;&quot;_id&quot;:false, &quot;level&quot;:false&#125;)</span><br><span class="line">db.info.find(&#123;&#125;,&#123;&quot;subject&quot;:true, &quot;level&quot;:true&#125;)</span><br><span class="line">db.info.find(&#123;&#125;,&#123;&quot;_id&quot;:false, &quot;subject&quot;:true, &quot;level&quot;:true&#125;)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Find Method</p>
<p>  find method를 사용하면 find를 사용한 document의 결과를 가공하여 출력할수 있습니다.</p>
<ul>
<li><p>sort</p>
<ul>
<li>document를 정렬시켜 줍니다.</li>
<li>‘sort({key: value})’ 와 같은 포멧으로 사용을 하며 key는 정렬할 필드명을 작성하고, value는 오름차순은 1, 내림차순을 -1을 넣어주면 됩니다.</li>
</ul>
</li>
<li><p>info 컬렉션의 document를 level 오름차순으로 정렬</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.find().sort(&#123;&quot;level&quot;:1&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>info 컬렉션의 document를 level 내림차순으로 정렬</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.find().sort(&#123;&quot;level&quot;:-1&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>level을 기준으로 내림차순으로 정렬한 후 subject를 기준으로 오름차순으로 정렬</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.find().sort(&#123;&quot;level&quot;:-1, &quot;subject&quot;:1&#125;)</span><br></pre></td></tr></table></figure>
</li>
<li><p>limit</p>
<ul>
<li><p>limit을 사용하면 document출력 결과의 수룰 제한할수 있습니다.</p>
</li>
<li><p>document의 결과를 3개 까지만 출력</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.find().limit(3)</span><br></pre></td></tr></table></figure>
</li>
<li><p>document의 결과를 level로 내림차순으로 정렬하고 3개까지만 출력</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.find().sort(&#123;&quot;level&quot;:-1&#125;).limit(3)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>skip</p>
<p>  skip을 검색한 document의 결과의 시작부분을 설정할때 사용합니다.</p>
<ul>
<li><p>document를 3번째 부터 출력</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.find().skip(2)</span><br></pre></td></tr></table></figure>

<p><code>limit, skip을 함께 사용해서 mysql의 limit과 같이 사용할수 있습니다.</code></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>update</p>
<p>  ref : <a target="_blank" rel="noopener" href="https://docs.mongodb.com/manual/reference/command/update/index.html">https://docs.mongodb.com/manual/reference/command/update/index.html</a></p>
<ul>
<li><p>syntax</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.collection.update( query, update, &#123; upsert: &lt;bool&gt;, multi: &lt;bool&gt; &#125;)</span><br></pre></td></tr></table></figure>

<ul>
<li><p>upsert : insert와 update의 합성어 (데이터가 있으면 update, 없으면 insert 한다는 의미)</p>
</li>
<li><p>multi : true로 설정되면 여려개의 document를 수정합니다. 기본값은 false</p>
</li>
</ul>
</li>
<li><p>특정 document를 새로운 document로 수정하기</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">db.info.update(</span><br><span class="line">&#123; &quot;subject&quot;: &quot;html&quot; &#125;,</span><br><span class="line">&#123; &quot;subject&quot;: &quot;sass&quot;, &quot;level&quot;:2&#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">db.info.update(</span><br><span class="line">&#123; &quot;subject&quot;: &quot;less&quot; &#125;,</span><br><span class="line">&#123; &quot;subject&quot;: &quot;less&quot;, &quot;level&quot;: 2&#125;,</span><br><span class="line">&#123; &quot;upsert&quot;: true&#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>$set, $unset</p>
<ul>
<li><p>$set을 사용하면 특정 document의 필드를 수정할수 있습니다.</p>
</li>
<li><p>$unset를 사용하면 특정 document의 필드 제거할수 있습니다.</p>
</li>
<li><p>python의 level을 3으로 수정 (한개의 데이터만 수정)</p>
  <figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db.info.update( &#123; subject: &quot;java&quot; &#125;, &#123; $set: &#123; level: 4 &#125; &#125; )</span><br></pre></td></tr></table></figure>
</li>
<li><p>level 2를 level 1로 수정 (여러개의 데이터 수정)</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">db.info.update(</span><br><span class="line">&#123; level: 2 &#125;,</span><br><span class="line">&#123; $set: &#123; level: 1 &#125; &#125;,</span><br><span class="line">&#123; multi: true &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>subject가 sass인 document의 level필드 삭제</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">db.info.update(</span><br><span class="line">&#123; subject: &quot;sass&quot; &#125;,</span><br><span class="line">&#123; $unset: &#123;level: 1&#125; &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<p>  <code>level: 1의 1은 true를 의미합니다.</code></p>
</li>
<li><p>level이 2이하인 데이터를 1로 수정하기</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">db.info.update(</span><br><span class="line">&#123; level: &#123;$lte: 2&#125; &#125;, </span><br><span class="line">&#123; $set: &#123;level: 1&#125; &#125;,</span><br><span class="line">&#123; multi: 1 &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
<li><p>level이 없는 데이터 level 추가하기</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">db.info.update(</span><br><span class="line">&#123; level: &#123;$exists: false&#125; &#125;,</span><br><span class="line">&#123; $set: &#123;level: 2&#125; &#125;,</span><br><span class="line">&#123; multi: 1 &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>Function</p>
<p>  자바스크립트 문법으로 함수 작성이 가능합니다.</p>
<ul>
<li><p>skip 함수</p>
  <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">var showSkip = function(<span class="keyword">start</span>)&#123;</span><br><span class="line"><span class="keyword">return</span> db.info.find().skip(<span class="keyword">start</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">showSkip(<span class="number">3</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/10/29/DATABASE-NoSQL-MongoDB/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2020/10/28/Java-Advanced10-Multi-Thread/"
                            aria-label=": Java-Advanced10-Multi Thread"
                        >
                            Java-Advanced10-Multi Thread
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2020-10-28T19:23:05+09:00">
	
		    Oct 28, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Java/">Java</a>, <a class="category-link" href="/categories/Java/Java-Advanced/">Java Advanced</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1 id="Multi-Thread-Programming"><a href="#Multi-Thread-Programming" class="headerlink" title="Multi-Thread Programming"></a>Multi-Thread Programming</h1><h2 id="Process-and-Thread"><a href="#Process-and-Thread" class="headerlink" title="Process and Thread"></a>Process and Thread</h2><ul>
<li>Process: OS로부터 메모리를 할당받아 실행중인 프로그램</li>
<li>Thread: 프로세스 동작의 최소 단위로, 하나의 프로세스는 여러 스레드로 이루어질 수 있다.</li>
</ul>
<h2 id="멀티스레드-프로그래밍의-장단점"><a href="#멀티스레드-프로그래밍의-장단점" class="headerlink" title="멀티스레드 프로그래밍의 장단점"></a>멀티스레드 프로그래밍의 장단점</h2><ul>
<li>장점<ul>
<li>여러 동작을 병렬적으로 처리하여 CPU의 사용률 향상</li>
<li>시간이 걸리는 동작을 분리하여 프로그램의 응답성 향상</li>
</ul>
</li>
<li>단점<ul>
<li>Context Switching 오버헤드 발생</li>
<li>스레드 제어의 어려움</li>
</ul>
</li>
</ul>
<h2 id="스레드-구현"><a href="#스레드-구현" class="headerlink" title="스레드 구현"></a>스레드 구현</h2><ul>
<li><p>스레드 생성 방법</p>
<ol>
<li><p>익명함수</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Thread threadOne = <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello Thread!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></li>
<li><p>람다식</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Thread threadTwo = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;Hello Again, Thread!&quot;</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
</li>
<li><p>Thread Class 상속</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Hello Again Again, Thread!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">Thread threadThree = <span class="keyword">new</span> MyThread();</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
<li><p>스레드 실행</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Thread threadOne = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">Thread threadTwo = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">        System.out.print(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">threadOne.start();</span><br><span class="line">threadTwo.start();</span><br><span class="line">System.out.println(<span class="string">&quot;Done!&quot;</span>);</span><br></pre></td></tr></table></figure>
<p><code>Thread 객체는 일회성이기 때문에 여러 번 start()메소드를 호출 할 수 없다</code></p>
<br>

</li>
</ul>
<h2 id="스레드의-상태-및-제어"><a href="#스레드의-상태-및-제어" class="headerlink" title="스레드의 상태 및 제어"></a>스레드의 상태 및 제어</h2><ul>
<li><p>스레드의 상태</p>
<ul>
<li><p>getState() 메소드로 스레드의 상태를 확인할 수 있다.</p>
<table>
<thead>
<tr>
<th>열거형 상수</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td><code>NEW</code></td>
<td><code>start()</code> 메소드가 아직 호출되지 않음</td>
</tr>
<tr>
<td><code>RUNNABLE</code></td>
<td>JVM에 의해 실행 가능한 상태</td>
</tr>
<tr>
<td><code>BLOCKED</code></td>
<td>객체가 블락된 상태</td>
</tr>
<tr>
<td><code>WAITING</code></td>
<td><code>sleep()</code>, <code>wait()</code>, <code>join()</code> 등에 의해 무한히 대기 중인 상태</td>
</tr>
<tr>
<td><code>TIMED_WAITING</code></td>
<td><code>sleep()</code>, <code>wait()</code>, <code>join()</code> 등에 의해 정해진 시간 동안 대기 중인 상태</td>
</tr>
<tr>
<td><code>TERMINATE</code></td>
<td><code>run()</code> 메소드가 종료된 상태</td>
</tr>
</tbody></table>
</li>
</ul>
</li>
<li><p>스레드의 우선순위 제어</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> MIN_PRIORITY = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> NORM_PRIORITY = <span class="number">5</span>;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">static</span> <span class="keyword">int</span> MAX_PRIORITY = <span class="number">10</span>;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>메소드</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td><code>void setPriority(int newPriority)</code></td>
<td>새로운 우선순위로 설정한다.</td>
</tr>
<tr>
<td><code>int getPriority()</code></td>
<td>우선순위를 반환한다.</td>
</tr>
</tbody></table>
</li>
<li><p><code>sleep()</code>을 이용한 제어</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Thread.sleep(<span class="number">1000</span>); <span class="comment">// ms</span></span><br><span class="line">Thread.sleep(<span class="number">100</span>, <span class="number">200</span>); <span class="comment">// ms + ns</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><code>join()</code>을 이용한 스레드 조인</p>
<ul>
<li><p>스레드 동작을 동기화하기 위해 사용</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Thread t1 = <span class="keyword">new</span> Thread(() -&gt; System.out.println(<span class="string">&quot;A&quot;</span>));</span><br><span class="line">Thread t2 = <span class="keyword">new</span> Thread(() -&gt; System.out.println(<span class="string">&quot;B&quot;</span>));</span><br><span class="line"></span><br><span class="line">t1.start(); <span class="comment">// t1 thread start</span></span><br><span class="line"></span><br><span class="line">t1.join(); <span class="comment">// t1 thread 종료시 까지 다른 thread 대기</span></span><br><span class="line"></span><br><span class="line">t2.start(); <span class="comment">// t2 thread start</span></span><br><span class="line"></span><br><span class="line">t2.join(<span class="number">100</span>); <span class="comment">// 100ms 기다린 후에도 t2가 종료되지 않으면 다른 쓰레드 시작 </span></span><br><span class="line"></span><br><span class="line">System.out.println(<span class="string">&quot;C&quot;</span>);</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><code>interrupt()</code>를 이용한 대기 중지</p>
<ul>
<li>기존 동작을 방해하고 반응을 강제하는 메소드<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Thread tSleep = <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Interrupted&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">tSleep.start();</span><br><span class="line"></span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    Thread.sleep(<span class="number">500</span>);</span><br><span class="line">&#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">    e.printStackTrace();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">tSleep.interrupt();</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><code>yield()</code>를 이용한 상태 제어</p>
<ul>
<li><code>sleep()</code>과 달리 곧바로 <code>RUNNABLE</code> 상태로 변경</li>
<li>다른 쓰레드에게 양보하고 바로 실행 대기</li>
<li>테스트용으로 쓰임 -&gt; 쓰레드의 동작이 명확하지 않음(바로 양보하지 않는다)<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;1&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Thread.yield();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).start();</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">        <span class="keyword">if</span> (i % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            System.out.print(<span class="string">&quot;2&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Thread.yield();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;).start();</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>스레드의 종료</p>
<ul>
<li>run() 메소드의 종료</li>
<li><code>stop()</code> 메소드 호출 (deprecated)</li>
</ul>
</li>
</ul>
<h2 id="데몬-스레드"><a href="#데몬-스레드" class="headerlink" title="데몬 스레드"></a>데몬 스레드</h2><ul>
<li><p>정의 : 다른 스레드가 종료될 경우 함께 종료되는 보조 스레드</p>
</li>
<li><p>활용법</p>
<ul>
<li>보통 대기하며 동작하는 무한 루프로 구현</li>
<li>일정 시간 마다 동작</li>
<li>interrupt에 의해서 동작</li>
</ul>
</li>
<li><p><code>setDaemon()</code> 메소드로 데몬 스레드로 설정</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DaemonThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DaemonThread</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.setDaemon(<span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(<span class="string">&quot;Daemon Thread Run&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="데이터-공유와-동기화"><a href="#데이터-공유와-동기화" class="headerlink" title="데이터 공유와 동기화"></a>데이터 공유와 동기화</h2><ul>
<li><p>스레드간 데이터 공유 시 신뢰성에 문제가 발생할 수 있음</p>
<p>  <code>결과는 1000000이 나오지 않는다 -&gt; count값이 동기화되지 않았기 때문</code></p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args[])</span></span>&#123;</span><br><span class="line">        Counter counter = <span class="keyword">new</span> Counter();</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">1000</span>; i++) &#123;</span><br><span class="line">            <span class="keyword">new</span> Thread(() -&gt; &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; <span class="number">1000</span>; j++) &#123;</span><br><span class="line">                    counter.count = counter.count + <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;).start();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        System.out.println(counter.count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>synchronized</code> 키워드 사용</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 공유 데이터 사용</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">method</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">synchronized</span>(sharedObj) &#123;</span><br><span class="line">        <span class="comment">// 공유 데이터 사용</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p>Example</p>
<ul>
<li><p>this 객체의 Intrinsic Lock을 이용한 구현</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">increaseCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> ++count; <span class="comment">// 읽고, 수정하고, 쓰는 작업</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>메소드에 synchronized 키워드 사용</p>
<ul>
<li>synchronized 키워드가 사용된 메소드를 호출하기 위해서는 해당 객체를 소유해야만 호출이 가능. 소유하지 못하면 Blocking<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">int</span> <span class="title">increaseCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> ++count; <span class="comment">// 읽고, 수정하고, 쓰는 작업</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getCount</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p><code>wait()</code>, <code>notify()</code>, <code>notifyAll()</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WorkObject</span> </span>&#123;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">methodA</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          System.out.println(<span class="string">&quot;ThreadA의 methodA() 작업 실행&quot;</span>);</span><br><span class="line">          notify(); <span class="comment">// 일시정지 상태에 있는 ThreadB를 실행 대기상태로 만듬 </span></span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">              wait(); <span class="comment">// ThreadA를 일시 정지 상태로 만듬 </span></span><br><span class="line">          &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">              e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  </span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">methodB</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          System.out.println(<span class="string">&quot;ThreadB의 methodB() 작업 실행&quot;</span>);</span><br><span class="line">          notify(); <span class="comment">// 일시정지 상태에 있는 ThreadA를 실행 대기상태로 만듬</span></span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">              wait(); <span class="comment">// ThreadB를 일시 정지 상태로 만듬</span></span><br><span class="line">          &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">              e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">ThreadA</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">      <span class="keyword">private</span> WorkObject workObject;</span><br><span class="line"></span><br><span class="line">      ThreadA(WorkObject workObject) &#123;</span><br><span class="line">          <span class="keyword">this</span>.workObject = workObject;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++) &#123;</span><br><span class="line">              workObject.methodA(); <span class="comment">// 공유객체의 methodA를 반복적으로 호출 </span></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">ThreadB</span> <span class="keyword">extends</span> <span class="title">Thread</span></span>&#123;</span><br><span class="line">      <span class="keyword">private</span> WorkObject workObject;</span><br><span class="line"></span><br><span class="line">      ThreadB(WorkObject workObject) &#123;</span><br><span class="line">          <span class="keyword">this</span>.workObject = workObject;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">0</span>; i&lt;<span class="number">10</span>; i++) &#123;</span><br><span class="line">              workObject.methodB(); <span class="comment">// 공유객체의 methodA를 반복적으로 호출 </span></span><br><span class="line">          &#125;</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">          WorkObject sharedObject = <span class="keyword">new</span> WorkObject();</span><br><span class="line">          </span><br><span class="line">          ThreadA threadA = <span class="keyword">new</span> ThreadA(sharedObject);</span><br><span class="line">          ThreadB threadB = <span class="keyword">new</span> ThreadB(sharedObject);</span><br><span class="line">          </span><br><span class="line">          threadA.start();</span><br><span class="line">          threadB.start();</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="세마포어"><a href="#세마포어" class="headerlink" title="세마포어"></a>세마포어</h2><ul>
<li><p>사전적 의미 : 횟대(깃발)</p>
</li>
<li><p>n개의 깃발을 놓고, 여러 스레드가 경쟁하도록 하는 sync 기법</p>
</li>
<li><p>n = 1이면, BinarySemaphore라고 하며, Lock과 유사하게 동작</p>
</li>
<li><p>메소드</p>
<ul>
<li>release(int permits) : permits만큼의 자원 개수 반환</li>
<li>acquire(int permits) : permits만큼의 자원 사용 (Blocking O)</li>
<li>tryAcquire(long timeout, TimeUnit unit) : unit단위의 timeout이후 자원을 얻지 못하면 false, 얻으면 true (Blocking X)</li>
<li>acquireUninterruptibly() : 자원을 얻지못해도 interrupt 발생 X</li>
</ul>
</li>
<li><p>Example</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Semaphore sem = <span class="keyword">new</span> Semaphore(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        sem.release(<span class="number">10</span>);</span><br><span class="line">        sem.tryAcquire();</span><br><span class="line">        System.out.println(sem.availablePermits());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123; <span class="comment">// Blocking으로 동작</span></span><br><span class="line">            sem.acquire(<span class="number">12</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        sem.acquireUninterruptibly(); <span class="comment">// interrupt에 반응하지 않음</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            System.out.println(sem.tryAcquire(<span class="number">100</span>, TimeUnit.MILLISECONDS)); <span class="comment">// Blocking 하지 않고, 실패하면 false</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        sem.release();</span><br><span class="line"></span><br><span class="line">        System.out.println(sem.availablePermits());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;  </span><br></pre></td></tr></table></figure>
</li>
<li><p>Dining Philosopher (식사하는 철학자)</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Philosopher</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Fork left;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Fork right;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Philosopher</span><span class="params">(<span class="keyword">int</span> id, Fork left, Fork right)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.left = left;</span><br><span class="line">        <span class="keyword">this</span>.right = right;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                left.acquire();</span><br><span class="line">                System.out.println(id + <span class="string">&quot;: left taken&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">if</span>(!right.tryAcquire(<span class="number">1000</span>, TimeUnit.MILLISECONDS))&#123;</span><br><span class="line">                    left.release();</span><br><span class="line">                    Thread.yield();</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                System.out.println(id + <span class="string">&quot;: right taken&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">                System.out.println(id + <span class="string">&quot;is eating&quot;</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            left.release();</span><br><span class="line">            right.release();</span><br><span class="line">            Thread.yield();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fork</span> <span class="keyword">extends</span> <span class="title">Semaphore</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Fork</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">super</span>(<span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Philosopher[] phils = <span class="keyword">new</span> Philosopher[<span class="number">5</span>];</span><br><span class="line">        Fork[] forks = <span class="keyword">new</span> Fork[<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">            forks[i] = <span class="keyword">new</span> Fork();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span> - <span class="number">1</span>; i++) &#123;</span><br><span class="line">            phils[i] = <span class="keyword">new</span> Philosopher(i, forks[i], forks[(i+<span class="number">1</span>) % <span class="number">5</span>]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        phils[<span class="number">4</span>] = <span class="keyword">new</span> Philosopher(<span class="number">4</span>, forks[<span class="number">0</span>], forks[<span class="number">4</span>]);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">            phils[i].start();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h2 id="JCF와-Thread"><a href="#JCF와-Thread" class="headerlink" title="JCF와 Thread"></a>JCF와 Thread</h2><ul>
<li><p>Vector VS List</p>
<ul>
<li>List   <ul>
<li>메소드들이 Synchronized 되지 않음</li>
<li>속도는 빠르다.</li>
</ul>
</li>
<li>Vector <ul>
<li>메소드들이 Synchronized 되어 있음</li>
<li>속도는 느리다.</li>
</ul>
</li>
</ul>
</li>
<li><p>List를 Synchronized 되게 하는 방법</p>
<ul>
<li>Collections의 synchronizedList() 사용  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Integer&gt; list1 = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">List&lt;Integer&gt; list2 = Collections.synchronizedList(list1);</span><br></pre></td></tr></table></figure>
<h2 id="Thread-Pool"><a href="#Thread-Pool" class="headerlink" title="Thread Pool"></a>Thread Pool</h2></li>
</ul>
</li>
<li><p>Thread Pool이란?</p>
<ul>
<li>미리 생성해 둔 Thread의 집합을 스레드 풀이라고 한다.</li>
<li>미리 Thread를 생성해 두고, 작업만 Thread에 할당하여 동작</li>
<li>사용 이유<ul>
<li>Thread를 직접 만들어 사용할 경우, Multi-Thread 작업을 계속 할 때, Thread 생성/삭제 오버해드가 크다.</li>
<li>배치작업 (모아두고 한 번에 처리하는 작업)에 유용하여 많이 사용된다.</li>
</ul>
</li>
</ul>
</li>
<li><p>Thread Pool 생성 </p>
<ul>
<li><p>Single Thread Pool</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ExecutorService pool = Executors.newSingleThreadExecutor();</span><br></pre></td></tr></table></figure>
<ul>
<li>Thread가 1개인 ThreadPool 생성(SingleThread)</li>
<li>실패 시, 새로운 Thread를 생성하지 않음</li>
</ul>
</li>
<li><p>Cached Thread Pool</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ExecutorService pool = Executors.newCachedThreadPool();</span><br></pre></td></tr></table></figure>
<ul>
<li>초기 Thread 0개</li>
<li>코어 Thread 0개 (일하지 않아도 종료시키지 않는 Thread)</li>
<li>요청 작업보다 Thead가 부족하면 새 스레드 생성</li>
<li>60초동안 일하지 않는 Thread 제거</li>
</ul>
</li>
<li><p>Fixed Thread Pool</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ExecutorService pool = Executors.newFixedThreadPool(<span class="keyword">int</span> nThreads);</span><br></pre></td></tr></table></figure>
<ul>
<li>최대 Thread nThreads개</li>
<li>코어 Thread nThreads개</li>
<li>작업하지 않는 Thread도 제거하지 않고 동작</li>
</ul>
</li>
<li><p>Scheduler Thread Pool</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ScheduledExecutorService pool = Executors.newScheduledThreadPool(<span class="keyword">int</span> corePoolSize);</span><br></pre></td></tr></table></figure>
<ul>
<li>지정된 delay후에 실행하도록함(주기적으로 실행하는 명령을 예약)</li>
</ul>
</li>
</ul>
</li>
<li><p>작업 생성과 처리 요청</p>
<ul>
<li><p>작업 생성</p>
<ul>
<li><p>Runnable 구현 클래스</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Runnable task = <span class="keyword">new</span> Runnable()&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="comment">// 작업 내용</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Callable 구현 클래스</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Callable&lt;T&gt; task = <span class="keyword">new</span> Callable&lt;T&gt;()&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> T <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">        <span class="comment">// 작업 내용</span></span><br><span class="line">        <span class="keyword">return</span> T;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>  <code>Runnable run()은 Return 값이 없고, Callable call()은 Return 값이 있음</code></p>
</li>
</ul>
</li>
<li><p>처리 요청</p>
<ul>
<li><p>매소드 </p>
<table>
<thead>
<tr>
<th>리턴 타입</th>
<th>메소드</th>
<th>설명</th>
</tr>
</thead>
<tbody><tr>
<td>void</td>
<td>execute(Runnable command)</td>
<td>Runnable을 작업 큐에 저장, 작업 처리 결과를 받지 못함</td>
</tr>
<tr>
<td>Future&lt;?&gt;</td>
<td>submit(Runnable task)</td>
<td>Runnable 작업 큐에 저장, 리턴된 Future를 통해 작업 처리 결과를 얻을 수 있음</td>
</tr>
<tr>
<td>Future</td>
<td>submit(Runnable task, V result)</td>
<td>Runnable 작업 큐에 저장, 리턴된 Future를 통해 작업 처리 결과를 얻을 수 있음</td>
</tr>
<tr>
<td>Future</td>
<td>submit(Callable task)</td>
<td>Callable 작업 큐에 저장, 리턴된 Future를 통해 작업 처리 결과를 얻을 수 있음</td>
</tr>
</tbody></table>
<ul>
<li><p>execute()</p>
<ul>
<li><p>작업 처리 결과를 반환하지 않는다.</p>
</li>
<li><p>작업 처리 도중 예외가 발생하면 스레드가 종료되고 해당 스레드는 스레드 풀에서 제거된다. </p>
</li>
<li><p>다른 작업을 처리하기 위해 새로운 스레드를 생성한다.</p>
</li>
</ul>
</li>
<li><p>submit()</p>
<ul>
<li><p>작업 처리 결과를 반환한다.</p>
</li>
<li><p>작업 처리 도중 예외가 발생하더라도 스레드는 종료되지 않고 다음 작업을 위해 재사용</p>
</li>
<li><p>스레드의 생성 오버헤드를 방지하기 위해서라도 submit() 을 가급적 사용한다.</p>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p>Thread Pool 종료</p>
<blockquote>
<p>Thread Pool에 속한 Thread는 데몬 스레드가 아니다</p>
</blockquote>
<blockquote>
<p>따라서 주 스레드 종료시 강제종료 되지 않기 때문에 main 스레드가 종료되어도 실행상태가 유지된다.</p>
</blockquote>
<blockquote>
<p>어플리케이션을 종료하기 위해서는 스레드 풀을 강제종료시켜야 한다.</p>
</blockquote>
<ul>
<li><p>excutorService.shutdown()</p>
<p>  작업큐에 남아있는 작업까지 모두 마무리 후 종료 (오버헤드를 줄이기 위해 일반적으로 많이 사용.)</p>
</li>
<li><p>excutorService.shoutdownNow()</p>
<p>  작업큐 작업 잔량 상관없이 강제 종료</p>
</li>
<li><p>excutorService.awaitTermination(long timeout, TimeUnit unit)</p>
<p>  모든 작업 처리를 timeout 시간안에 처리하면 true 리턴 ,처리하지 못하면 작업스레드들을 interrupt()시키고 false리턴</p>
</li>
</ul>
</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2020/10/28/Java-Advanced10-Multi-Thread/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="/archives/page/2/"
                aria-label="OLDER POSTS"
            >
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 1 of 9</li>
    </ul>
</div>

</section>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Yechan Kim. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">Yechan Kim</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
