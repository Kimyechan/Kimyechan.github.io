
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Java Server Developer">
    <title>Spring-Spring MVC 1 (MVC Framework 직접구현) - Java Server Developer</title>
    <meta name="author" content="Yechan Kim">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yechan Kim","sameAs":["https://github.com/","http://stackoverflow.com/users","https://twitter.com/","https://facebook.com/","https://plus.google.com/","https://www.linkedin.com/profile/","mailto"]},"articleBody":"Servlet기반 MVC 구조 및 동작 순서\n\n클라이언트로부터 요청이 Dispatcher Servlet으로 들어온다.\nDispatcher Servlet은 DAO를 통해서 데이터를 가져온다.\nHttp Session에 DB에서 가져온 데이터를 저장한다.(굳이 이렇게 할 필요는 없음)\nDispatcher Servlet이 해당 뷰로 매칭시킨다.\nJSP 뷰에서 Session 객체에 저장되어진 데이터를 가져와 뷰를 구성한다\n구성되어진 뷰는 클라이언트로 다시 보내어진다.\n\nSpring MVC 구조 및 동작 순서\n\n클라이언트에서 서버로 요청을 보내면 제일 먼저 Dispatcher Servlet이 요청을 받는다.\nDispatcher Servlet은 받은 요청 URI를 HandlerMapping으로 보내면 HandlerMapping은 해당 URI와 매핑되는 Controller객체를 받는다.\n매핑된 Controller에서 DAO로 부터 데이터를 받아 business logic을 처리하고 View Name을 리턴한다\nView Name은 ViewResolver를 통해서 Prefix나 Suffix등의 붙어지고 해당 뷰는 Client로 보내어진다.\n\nSpring MVC 구조 직접 만들기\nweb.xml 설정\n 12345678&lt;servlet&gt;    &lt;servlet-name&gt;action&lt;/servlet-name&gt;    &lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;&lt;/servlet&gt;&lt;servlet-mapping&gt;    &lt;servlet-name&gt;action&lt;/servlet-name&gt;    &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;\n\n모든 요청이 Dispatcher Servlet을 거치도록 설정한다.\nDispatcher Serlvet이 모든 클라이언트 요청을 첫 번째로 받는다.\n\n\nDispatcher Servlet 구현\n 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849public class DispatcherServlet extends HttpServlet &#123;    private static final long serialVersionUID = 1L;    private HandlerMapping handlerMapping;    private ViewResolver viewResolver;    public DispatcherServlet() &#123;        System.out.println(&quot;===&gt; DispatcherServlet 생성&quot;);    &#125;    @Override    public void init() throws ServletException &#123;        handlerMapping = new HandlerMapping();        viewResolver = new ViewResolver();        // ViewResolver의 접두사와 접미사를 결정한다        viewResolver.setPrefix(&quot;./&quot;);        viewResolver.setSuffix(&quot;.jsp&quot;);    &#125;    protected void service(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException &#123;        // 1. 사용자 요청 path 정보를 추출한다.        String uri = request.getRequestURI();        String path = uri.substring(uri.lastIndexOf(&quot;/&quot;));        System.out.println(path);        // 2. HandlerMapping을 통해 path에 해당하는 Controller를 검색한다.        Controller ctrl = handlerMapping.getController(path);        // 3. 검색된 Controller를 실행한다        String viewName = ctrl.handleRequest(request, response);        // 4. ViewResolver를 통해 viewName에 해당하는 화면을 검색한다        String view = null;        if (!viewName.contains(&quot;.do&quot;)) &#123;            if (viewName.contains(&quot;.html&quot;))&#123;                view = viewName;            &#125; else &#123;                view = viewResolver.getView(viewName);            &#125;        &#125; else &#123;            view = viewName;        &#125;        // 5. ViewResolver가 검색해준 화면으로 이동한다.        response.sendRedirect(view);    &#125;&#125;\n\n요청이 들어오면 Dispatcher Serlvet에서 URI에 해당하는 Controller를 HandlerMapping 객체를 통해 받아온다\nController에서 logic을 처리하고 View Name을 Return해준다\nReturn받은 View Name을 ViewResolver로 다시 재 조합한다\n재조합된 View Name으로 응답을 보낸다\n\n\nHandler Mapping 구현\n 1234567891011121314151617181920212223public class HandlerMapping &#123;    private Map&lt;String, Controller&gt; mappings;    public HandlerMapping() &#123;        // 모든 컨트롤러 객체를 Map에 등록한다        mappings = new HashMap&lt;String, Controller&gt;();        // USERS관련 컨트롤러 등록        mappings.put(&quot;/login.do&quot;, new LoginController());        mappings.put(&quot;/logout.do&quot;, new LogoutController());        // BOARD 관련 컨트롤러 등록        mappings.put(&quot;/getBoardList.do&quot;, new GetBoardListController());        mappings.put(&quot;/insertBoard.do&quot;, new InsertBoardController());        mappings.put(&quot;/updateBoard.do&quot;, new UpdateBoardController());        mappings.put(&quot;/deleteBoard.do&quot;, new DeleteBoardController());        mappings.put(&quot;/getBoard.do&quot;, new GetBoardController());    &#125;    public Controller getController(String path) &#123;        // 매개변수로 받은 path에 해당하는 컨트롤러 객체를 검색하여 리턴한다.        return mappings.get(path);    &#125;&#125;\n\n각 요청에 대한 Controller 객체를 HashMap에 저장한다\n요청이 들어오면 HashMap에서 해당 Controller 객체를 가져온다\n\n\n해당 Controller 구현\n 123456789101112131415161718public class InsertBoardController implements Controller &#123;    @Override    public String handleRequest(HttpServletRequest request, HttpServletResponse response) &#123;        String title = request.getParameter(&quot;title&quot;);        String writer = request.getParameter(&quot;writer&quot;);        String content = request.getParameter(&quot;content&quot;);        BoardVO vo = new BoardVO();        vo.setTitle(title);        vo.setWriter(writer);        vo.setContent(content);        BoardDAO boardDAO = new BoardDAOJDBC();        boardDAO.insertBoard(vo);    return &quot;getBoardList.do&quot;;    &#125;&#125;\n\nDAO에서 요청한 데이터를 가져오는 등의 Business Logic을 진행한다.\n응답으로 보내져야할 View Name을 Return한다.\n\n\nViewResolver 구현\n 12345678910111213141516171819public class ViewResolver &#123;    //접두사    private String prefix;    //접미사    public String suffix;    public void setPrefix(String prefix) &#123;        this.prefix = prefix;    &#125;    public void setSuffix(String suffix) &#123;        this.suffix = suffix;    &#125;    public String getView(String viewName) &#123;        return prefix + viewName + suffix;    &#125;&#125;\n\nController에서 받아온 View Name에 경로설정과 파일 확장자와 같은 부분을 Prefix나 Suffix로 붙혀서 Return한다\n\n\n\nSpring MVC (XML을 통한 설정)Servlet Container와 Spring Container와의 관계\nWeb이 아닌 Spring Project에서 Spring Container를 구성할 때에는 GenericXmlApplicationContext나 AnnotationApplicationContext와 같은 Class를 통해서 xml이나 java파일을 설정파일로 등록하고 만들었다.\n\n하지만 Spring Web Project는 Spring Container를 구성할 때 XmlWebApplicationContext같은 WebApplicationContext Class로 형성되어진다.\n\nSpring Web Project의 Spring Container 형성과정은 Web이 아닌 Spring Project와는 형성과정에 차이가 있다\n\nSpring Web Project Container 형성과정\n  \n\nTomcat과 같은 WAS가 처음 로딩될 때 Servlet Container를 생성한다\n\nServlet Container를 통해서 DispatcherServlet에 요청이 들어왔을 때 DispatcherServlet이 메모리에 형성된다\n\nDispatcherServlet이 처음 생성되어 질 때 init() 메소드가 호출되어 지는데 그 메소드에 Spring Container 생성 코드가 포함되어져 있다.\n\nXmlWebAppolication과 같은 객체에 Spring Bean 정보가 들어있는 action-servlet.xml을 받아서 Spring Container를 생성한다\n Servlet Container는 Servlet, Filter, Listener와 같은 클래스 밖에 관리를 못하지만, Spring Container는 일반 클래스들도 Bean으로 등록하여 관리할 수 있다.\n\n\n\n\n\nweb.xml에 Spring DispatcherServlet 등록\n 123456789101112131415&lt;servlet&gt;    &lt;servlet-name&gt;action&lt;/servlet-name&gt;    &lt;servlet-class&gt;            org.springframework.web.servlet.DispatcherServlet    &lt;/servlet-class&gt;    &lt;init-param&gt;            &lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;            &lt;param-value&gt;/WEB-INF/config/presentation-layer.xml&lt;/param-value&gt;    &lt;/init-param&gt;&lt;/servlet&gt; &lt;servlet-mapping&gt;        &lt;servlet-name&gt;action&lt;/servlet-name&gt;        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;&lt;/servlet-mapping&gt;\n\n이전에는 직접 구현한 DispatcherServlet을 web.xml에 등록했다\n지금은 Spring Framework에서 만들어진 Dispatcher Servlet을 모든 요청에 매핑되도록 등록했다\nSpring Container 빈 설정파일은 action-servlet.xml와 같은 이름 기본 등록되어있다\n다른 이름의 xml로 바꾸고싶다면 param에 contextConfigLocation을 변경해주면 된다\n\n\npresentation-layer.xml 설정 (Spring Bean 설정파일)\n 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;   xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd   &lt;!-- 모든 컨트롤러 클래스들을 bean으로 등록한다 --&gt;    &lt;bean id=&quot;getBoardList&quot; class=&quot;com.rubypaper.web.controller.board.GetBoardListController&quot;&gt;    &lt;/bean&gt;    &lt;bean id=&quot;login&quot; class=&quot;com.rubypaper.web.controller.user.LoginController&quot;&gt;    &lt;/bean&gt;    &lt;bean id=&quot;logout&quot; class=&quot;com.rubypaper.web.controller.user.LogoutController&quot;&gt;    &lt;/bean&gt;    &lt;bean id=&quot;getBoard&quot; class=&quot;com.rubypaper.web.controller.board.GetBoardController&quot;&gt;    &lt;/bean&gt;    &lt;bean id=&quot;insertBoard&quot; class=&quot;com.rubypaper.web.controller.board.InsertBoardController&quot;&gt;    &lt;/bean&gt;    &lt;bean id=&quot;updateBoard&quot; class=&quot;com.rubypaper.web.controller.board.UpdateBoardController&quot;&gt;    &lt;/bean&gt;    &lt;bean id=&quot;deleteBoard&quot; class=&quot;com.rubypaper.web.controller.board.DeleteBoardController&quot;&gt;    &lt;/bean&gt;    &lt;!-- 클라이언트의 요청을 어떤 컨트롤러가 처리할지 HandlerMapping으로 매핑한다 --&gt;    &lt;!-- handleMapping id 고정 (spring에서 등록한 bean은 마지막 단어 두개 중 첫 단어만 소문자로 변경해서 id로 등록)--&gt;    &lt;bean id=&quot;handlerMapping&quot; class=&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;&gt;        &lt;property name=&quot;mappings&quot;&gt;            &lt;props&gt;                &lt;prop key=&quot;/login.do&quot;&gt;login&lt;/prop&gt;                &lt;prop key=&quot;/logout.do&quot;&gt;logout&lt;/prop&gt;                &lt;prop key=&quot;/getBoardList.do&quot;&gt;getBoardList&lt;/prop&gt;                &lt;prop key=&quot;/getBoard.do&quot;&gt;getBoard&lt;/prop&gt;                &lt;prop key=&quot;/insertBoard.do&quot;&gt;insertBoard&lt;/prop&gt;                &lt;prop key=&quot;/updateBoard.do&quot;&gt;updateBoard&lt;/prop&gt;                &lt;prop key=&quot;/deleteBoard.do&quot;&gt;deleteBoard&lt;/prop&gt;            &lt;/props&gt;        &lt;/property&gt;    &lt;/bean&gt;    &lt;!--  View Resolver를 등록한다            브라우저는 절대 서버가 관리하는 프로젝트의 WEB-INF폴더에 접근할 수 없다.            따라서 브라우저가 직접 접근해서는 안되는 파일은 WEB-INF폴더에 은닉한다.    --&gt;    &lt;bean id=&quot;viewResolver&quot; class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;        &lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/board/&quot;/&gt;        &lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt;    &lt;/bean&gt;&lt;/beans&gt;\n\n모든 컨트롤러 클래스를 bean으로 등록한다\n클라이언트 각 요청의 URI마다 어떤 Controller가 처리할 지 Spring HandlerMapping으로 매핑한다\nSpring ViewResolver을 등록한다\n브라우저는 WEB-INF 폴더에 접근할 수 없으므로 브라우저가 접근하면 안되는 파일은 WEB-INF 디렉토리에 은닉한다\n\n\nSpring Controller Interface를 구현한 Controller 클래스 생성\n 12345678910111213141516171819202122232425public class LoginController implements Controller &#123;    @Override    public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) &#123;        String id = request.getParameter(&quot;id&quot;);        String password = request.getParameter(&quot;password&quot;);        UserVO vo = new UserVO();        vo.setId(id);        vo.setPassword(password);        UserDAO userDAO = new UserDAOJDBC();        UserVO user = userDAO.getUser(vo);        ModelAndView mav = new ModelAndView();        if (user != null) &#123;            HttpSession session = request.getSession();            session.setAttribute(&quot;user&quot;, user);            // forward: 이나 redirect: 을 뷰 이름 앞에 붙이면 ViewResolver를 무시한다            mav.setViewName(&quot;forward:getBoardList.do&quot;);        &#125; else &#123;            mav.setViewName(&quot;redirect:login.jsp&quot;);        &#125;        return mav;    &#125;&#125;\n\norg.springframework.web.servlet.mvc.Controller의 구현체 클래스를 만든다\n이전에는 View Name을 String 값으로 return했다면 지금은 ModelAndView 객체로 Return한다\nSpring ViewResolver를 거치지 않고 ViewName을 설정하려면 redirect: 나 forward: 를 ViewName에 추가한다\n\n\n\n","dateCreated":"2020-11-30T20:04:16+09:00","dateModified":"2020-11-30T22:43:44+09:00","datePublished":"2020-11-30T20:04:16+09:00","description":"","headline":"Spring-Spring MVC 1 (MVC Framework 직접구현)","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://kimyechan.github.io/2020/11/30/Spring-Spring-MVC-1-MVC-Framework-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84/"},"publisher":{"@type":"Organization","name":"Yechan Kim","sameAs":["https://github.com/","http://stackoverflow.com/users","https://twitter.com/","https://facebook.com/","https://plus.google.com/","https://www.linkedin.com/profile/","mailto"]},"url":"https://kimyechan.github.io/2020/11/30/Spring-Spring-MVC-1-MVC-Framework-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84/"}</script>
    <meta name="description" content="Servlet기반 MVC 구조 및 동작 순서  클라이언트로부터 요청이 Dispatcher Servlet으로 들어온다. Dispatcher Servlet은 DAO를 통해서 데이터를 가져온다. Http Session에 DB에서 가져온 데이터를 저장한다.(굳이 이렇게 할 필요는 없음) Dispatcher Servlet이 해당 뷰로 매칭시킨다. JSP 뷰에서 Se">
<meta property="og:type" content="blog">
<meta property="og:title" content="Spring-Spring MVC 1 (MVC Framework 직접구현)">
<meta property="og:url" content="https://kimyechan.github.io/2020/11/30/Spring-Spring-MVC-1-MVC-Framework-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84/index.html">
<meta property="og:site_name" content="Java Server Developer">
<meta property="og:description" content="Servlet기반 MVC 구조 및 동작 순서  클라이언트로부터 요청이 Dispatcher Servlet으로 들어온다. Dispatcher Servlet은 DAO를 통해서 데이터를 가져온다. Http Session에 DB에서 가져온 데이터를 저장한다.(굳이 이렇게 할 필요는 없음) Dispatcher Servlet이 해당 뷰로 매칭시킨다. JSP 뷰에서 Se">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://user-images.githubusercontent.com/12459864/100602774-b2c6ce00-3347-11eb-867b-0c8e7db60e01.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/12459864/100603516-8f505300-3348-11eb-8b33-9e39b2cb1957.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/12459864/100606765-451da080-334d-11eb-9eaf-0085c2041274.png">
<meta property="article:published_time" content="2020-11-30T11:04:16.000Z">
<meta property="article:modified_time" content="2020-11-30T13:43:44.702Z">
<meta property="article:author" content="Yechan Kim">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/12459864/100602774-b2c6ce00-3347-11eb-867b-0c8e7db60e01.png">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Java Server Developer
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="Search"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="http://stackoverflow.com/users"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Stack Overflow"
                        >
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://facebook.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://plus.google.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Google +"
                        >
                        <i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Google +</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/mailto"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Spring-Spring MVC 1 (MVC Framework 직접구현)
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2020-11-30T20:04:16+09:00">
	
		    Nov 30, 2020
    	
    </time>
    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <h1 id="Servlet기반-MVC-구조-및-동작-순서"><a href="#Servlet기반-MVC-구조-및-동작-순서" class="headerlink" title="Servlet기반 MVC 구조 및 동작 순서"></a>Servlet기반 MVC 구조 및 동작 순서</h1><p><img src="https://user-images.githubusercontent.com/12459864/100602774-b2c6ce00-3347-11eb-867b-0c8e7db60e01.png" alt="image"></p>
<ol>
<li>클라이언트로부터 요청이 Dispatcher Servlet으로 들어온다.</li>
<li>Dispatcher Servlet은 DAO를 통해서 데이터를 가져온다.</li>
<li>Http Session에 DB에서 가져온 데이터를 저장한다.(굳이 이렇게 할 필요는 없음)</li>
<li>Dispatcher Servlet이 해당 뷰로 매칭시킨다.</li>
<li>JSP 뷰에서 Session 객체에 저장되어진 데이터를 가져와 뷰를 구성한다</li>
<li>구성되어진 뷰는 클라이언트로 다시 보내어진다.</li>
</ol>
<h1 id="Spring-MVC-구조-및-동작-순서"><a href="#Spring-MVC-구조-및-동작-순서" class="headerlink" title="Spring MVC 구조 및 동작 순서"></a>Spring MVC 구조 및 동작 순서</h1><p><img src="https://user-images.githubusercontent.com/12459864/100603516-8f505300-3348-11eb-8b33-9e39b2cb1957.png" alt="image"></p>
<ol>
<li>클라이언트에서 서버로 요청을 보내면 제일 먼저 Dispatcher Servlet이 요청을 받는다.</li>
<li>Dispatcher Servlet은 받은 요청 URI를 HandlerMapping으로 보내면 HandlerMapping은 해당 URI와 매핑되는 Controller객체를 받는다.</li>
<li>매핑된 Controller에서 DAO로 부터 데이터를 받아 business logic을 처리하고 View Name을 리턴한다</li>
<li>View Name은 ViewResolver를 통해서 Prefix나 Suffix등의 붙어지고 해당 뷰는 Client로 보내어진다.</li>
</ol>
<h1 id="Spring-MVC-구조-직접-만들기"><a href="#Spring-MVC-구조-직접-만들기" class="headerlink" title="Spring MVC 구조 직접 만들기"></a>Spring MVC 구조 직접 만들기</h1><ol>
<li><p>web.xml 설정</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>action<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>action<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>모든 요청이 Dispatcher Servlet을 거치도록 설정한다.</li>
<li>Dispatcher Serlvet이 모든 클라이언트 요청을 첫 번째로 받는다.</li>
</ul>
</li>
<li><p>Dispatcher Servlet 구현</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DispatcherServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1L</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> HandlerMapping handlerMapping;</span><br><span class="line">    <span class="keyword">private</span> ViewResolver viewResolver;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DispatcherServlet</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;===&gt; DispatcherServlet 생성&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">()</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">        handlerMapping = <span class="keyword">new</span> HandlerMapping();</span><br><span class="line">        viewResolver = <span class="keyword">new</span> ViewResolver();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// ViewResolver의 접두사와 접미사를 결정한다</span></span><br><span class="line">        viewResolver.setPrefix(<span class="string">&quot;./&quot;</span>);</span><br><span class="line">        viewResolver.setSuffix(<span class="string">&quot;.jsp&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">        <span class="comment">// 1. 사용자 요청 path 정보를 추출한다.</span></span><br><span class="line">        String uri = request.getRequestURI();</span><br><span class="line">        String path = uri.substring(uri.lastIndexOf(<span class="string">&quot;/&quot;</span>));</span><br><span class="line">        System.out.println(path);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 2. HandlerMapping을 통해 path에 해당하는 Controller를 검색한다.</span></span><br><span class="line">        Controller ctrl = handlerMapping.getController(path);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 3. 검색된 Controller를 실행한다</span></span><br><span class="line">        String viewName = ctrl.handleRequest(request, response);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 4. ViewResolver를 통해 viewName에 해당하는 화면을 검색한다</span></span><br><span class="line">        String view = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (!viewName.contains(<span class="string">&quot;.do&quot;</span>)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (viewName.contains(<span class="string">&quot;.html&quot;</span>))&#123;</span><br><span class="line">                view = viewName;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                view = viewResolver.getView(viewName);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            view = viewName;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 5. ViewResolver가 검색해준 화면으로 이동한다.</span></span><br><span class="line">        response.sendRedirect(view);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>요청이 들어오면 Dispatcher Serlvet에서 URI에 해당하는 Controller를 HandlerMapping 객체를 통해 받아온다</li>
<li>Controller에서 logic을 처리하고 View Name을 Return해준다</li>
<li>Return받은 View Name을 ViewResolver로 다시 재 조합한다</li>
<li>재조합된 View Name으로 응답을 보낸다</li>
</ul>
</li>
<li><p>Handler Mapping 구현</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HandlerMapping</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, Controller&gt; mappings;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HandlerMapping</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 모든 컨트롤러 객체를 Map에 등록한다</span></span><br><span class="line">        mappings = <span class="keyword">new</span> HashMap&lt;String, Controller&gt;();</span><br><span class="line">        <span class="comment">// USERS관련 컨트롤러 등록</span></span><br><span class="line">        mappings.put(<span class="string">&quot;/login.do&quot;</span>, <span class="keyword">new</span> LoginController());</span><br><span class="line">        mappings.put(<span class="string">&quot;/logout.do&quot;</span>, <span class="keyword">new</span> LogoutController());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// BOARD 관련 컨트롤러 등록</span></span><br><span class="line">        mappings.put(<span class="string">&quot;/getBoardList.do&quot;</span>, <span class="keyword">new</span> GetBoardListController());</span><br><span class="line">        mappings.put(<span class="string">&quot;/insertBoard.do&quot;</span>, <span class="keyword">new</span> InsertBoardController());</span><br><span class="line">        mappings.put(<span class="string">&quot;/updateBoard.do&quot;</span>, <span class="keyword">new</span> UpdateBoardController());</span><br><span class="line">        mappings.put(<span class="string">&quot;/deleteBoard.do&quot;</span>, <span class="keyword">new</span> DeleteBoardController());</span><br><span class="line">        mappings.put(<span class="string">&quot;/getBoard.do&quot;</span>, <span class="keyword">new</span> GetBoardController());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Controller <span class="title">getController</span><span class="params">(String path)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 매개변수로 받은 path에 해당하는 컨트롤러 객체를 검색하여 리턴한다.</span></span><br><span class="line">        <span class="keyword">return</span> mappings.get(path);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>각 요청에 대한 Controller 객체를 HashMap에 저장한다</li>
<li>요청이 들어오면 HashMap에서 해당 Controller 객체를 가져온다</li>
</ul>
</li>
<li><p>해당 Controller 구현</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">InsertBoardController</span> <span class="keyword">implements</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">handleRequest</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">        String title = request.getParameter(<span class="string">&quot;title&quot;</span>);</span><br><span class="line">        String writer = request.getParameter(<span class="string">&quot;writer&quot;</span>);</span><br><span class="line">        String content = request.getParameter(<span class="string">&quot;content&quot;</span>);</span><br><span class="line"></span><br><span class="line">        BoardVO vo = <span class="keyword">new</span> BoardVO();</span><br><span class="line">        vo.setTitle(title);</span><br><span class="line">        vo.setWriter(writer);</span><br><span class="line">        vo.setContent(content);</span><br><span class="line"></span><br><span class="line">        BoardDAO boardDAO = <span class="keyword">new</span> BoardDAOJDBC();</span><br><span class="line">        boardDAO.insertBoard(vo);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;getBoardList.do&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>DAO에서 요청한 데이터를 가져오는 등의 Business Logic을 진행한다.</li>
<li>응답으로 보내져야할 View Name을 Return한다.</li>
</ul>
</li>
<li><p>ViewResolver 구현</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ViewResolver</span> </span>&#123;</span><br><span class="line">    <span class="comment">//접두사</span></span><br><span class="line">    <span class="keyword">private</span> String prefix;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//접미사</span></span><br><span class="line">    <span class="keyword">public</span> String suffix;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrefix</span><span class="params">(String prefix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.prefix = prefix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSuffix</span><span class="params">(String suffix)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.suffix = suffix;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getView</span><span class="params">(String viewName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> prefix + viewName + suffix;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Controller에서 받아온 View Name에 경로설정과 파일 확장자와 같은 부분을 Prefix나 Suffix로 붙혀서 Return한다</li>
</ul>
</li>
</ol>
<h1 id="Spring-MVC-XML을-통한-설정"><a href="#Spring-MVC-XML을-통한-설정" class="headerlink" title="Spring MVC (XML을 통한 설정)"></a>Spring MVC (XML을 통한 설정)</h1><h2 id="Servlet-Container와-Spring-Container와의-관계"><a href="#Servlet-Container와-Spring-Container와의-관계" class="headerlink" title="Servlet Container와 Spring Container와의 관계"></a>Servlet Container와 Spring Container와의 관계</h2><ul>
<li><p>Web이 아닌 Spring Project에서 Spring Container를 구성할 때에는 GenericXmlApplicationContext나 AnnotationApplicationContext와 같은 Class를 통해서 xml이나 java파일을 설정파일로 등록하고 만들었다.</p>
</li>
<li><p>하지만 Spring Web Project는 Spring Container를 구성할 때 XmlWebApplicationContext같은 WebApplicationContext Class로 형성되어진다.</p>
</li>
<li><p>Spring Web Project의 Spring Container 형성과정은 Web이 아닌 Spring Project와는 형성과정에 차이가 있다</p>
</li>
<li><p>Spring Web Project Container 형성과정</p>
<p>  <img src="https://user-images.githubusercontent.com/12459864/100606765-451da080-334d-11eb-9eaf-0085c2041274.png" alt="image"></p>
<ol>
<li><p>Tomcat과 같은 WAS가 처음 로딩될 때 Servlet Container를 생성한다</p>
</li>
<li><p>Servlet Container를 통해서 DispatcherServlet에 요청이 들어왔을 때 DispatcherServlet이 메모리에 형성된다</p>
</li>
<li><p>DispatcherServlet이 처음 생성되어 질 때 init() 메소드가 호출되어 지는데 그 메소드에 Spring Container 생성 코드가 포함되어져 있다.</p>
</li>
<li><p>XmlWebAppolication과 같은 객체에 Spring Bean 정보가 들어있는 action-servlet.xml을 받아서 Spring Container를 생성한다</p>
<p> <code>Servlet Container는 Servlet, Filter, Listener와 같은 클래스 밖에 관리를 못하지만, Spring Container는 일반 클래스들도 Bean으로 등록하여 관리할 수 있다.</code></p>
</li>
</ol>
</li>
</ul>
<ol>
<li><p>web.xml에 Spring DispatcherServlet 등록</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>action<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">            org.springframework.web.servlet.DispatcherServlet</span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>/WEB-INF/config/presentation-layer.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"> </span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>action<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>이전에는 직접 구현한 DispatcherServlet을 web.xml에 등록했다</li>
<li>지금은 Spring Framework에서 만들어진 Dispatcher Servlet을 모든 요청에 매핑되도록 등록했다</li>
<li>Spring Container 빈 설정파일은 action-servlet.xml와 같은 이름 기본 등록되어있다</li>
<li>다른 이름의 xml로 바꾸고싶다면 param에 contextConfigLocation을 변경해주면 된다</li>
</ul>
</li>
<li><p>presentation-layer.xml 설정 (Spring Bean 설정파일)</p>
 <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">&quot;http://www.springframework.org/schema/beans&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">   <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd</span></span></span><br><span class="line"><span class="tag"><span class="string"></span></span></span><br><span class="line"><span class="tag"><span class="string">   &lt;!-- 모든 컨트롤러 클래스들을 bean으로 등록한다 --&gt;</span></span></span><br><span class="line"><span class="tag"><span class="string">    &lt;bean id=&quot;</span><span class="attr">getBoardList</span>&quot; <span class="attr">class</span>=<span class="string">&quot;com.rubypaper.web.controller.board.GetBoardListController&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;login&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.rubypaper.web.controller.user.LoginController&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;logout&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.rubypaper.web.controller.user.LogoutController&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;getBoard&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.rubypaper.web.controller.board.GetBoardController&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;insertBoard&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.rubypaper.web.controller.board.InsertBoardController&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;updateBoard&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.rubypaper.web.controller.board.UpdateBoardController&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;deleteBoard&quot;</span> <span class="attr">class</span>=<span class="string">&quot;com.rubypaper.web.controller.board.DeleteBoardController&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 클라이언트의 요청을 어떤 컨트롤러가 처리할지 HandlerMapping으로 매핑한다 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- handleMapping id 고정 (spring에서 등록한 bean은 마지막 단어 두개 중 첫 단어만 소문자로 변경해서 id로 등록)--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;handlerMapping&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.handler.SimpleUrlHandlerMapping&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;mappings&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;/login.do&quot;</span>&gt;</span>login<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;/logout.do&quot;</span>&gt;</span>logout<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;/getBoardList.do&quot;</span>&gt;</span>getBoardList<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;/getBoard.do&quot;</span>&gt;</span>getBoard<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;/insertBoard.do&quot;</span>&gt;</span>insertBoard<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;/updateBoard.do&quot;</span>&gt;</span>updateBoard<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">&quot;/deleteBoard.do&quot;</span>&gt;</span>deleteBoard<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!--  View Resolver를 등록한다</span></span><br><span class="line"><span class="comment">            브라우저는 절대 서버가 관리하는 프로젝트의 WEB-INF폴더에 접근할 수 없다.</span></span><br><span class="line"><span class="comment">            따라서 브라우저가 직접 접근해서는 안되는 파일은 WEB-INF폴더에 은닉한다.</span></span><br><span class="line"><span class="comment">    --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">&quot;viewResolver&quot;</span> <span class="attr">class</span>=<span class="string">&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;prefix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;/WEB-INF/board/&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;suffix&quot;</span> <span class="attr">value</span>=<span class="string">&quot;.jsp&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>모든 컨트롤러 클래스를 bean으로 등록한다</li>
<li>클라이언트 각 요청의 URI마다 어떤 Controller가 처리할 지 Spring HandlerMapping으로 매핑한다</li>
<li>Spring ViewResolver을 등록한다</li>
<li>브라우저는 WEB-INF 폴더에 접근할 수 없으므로 브라우저가 접근하면 안되는 파일은 WEB-INF 디렉토리에 은닉한다</li>
</ul>
</li>
<li><p>Spring Controller Interface를 구현한 Controller 클래스 생성</p>
 <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginController</span> <span class="keyword">implements</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handleRequest</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> </span>&#123;</span><br><span class="line">        String id = request.getParameter(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">        String password = request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line"></span><br><span class="line">        UserVO vo = <span class="keyword">new</span> UserVO();</span><br><span class="line">        vo.setId(id);</span><br><span class="line">        vo.setPassword(password);</span><br><span class="line"></span><br><span class="line">        UserDAO userDAO = <span class="keyword">new</span> UserDAOJDBC();</span><br><span class="line">        UserVO user = userDAO.getUser(vo);</span><br><span class="line"></span><br><span class="line">        ModelAndView mav = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">        <span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">            HttpSession session = request.getSession();</span><br><span class="line">            session.setAttribute(<span class="string">&quot;user&quot;</span>, user);</span><br><span class="line">            <span class="comment">// forward: 이나 redirect: 을 뷰 이름 앞에 붙이면 ViewResolver를 무시한다</span></span><br><span class="line">            mav.setViewName(<span class="string">&quot;forward:getBoardList.do&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            mav.setViewName(<span class="string">&quot;redirect:login.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> mav;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>org.springframework.web.servlet.mvc.Controller의 구현체 클래스를 만든다</li>
<li>이전에는 View Name을 String 값으로 return했다면 지금은 ModelAndView 객체로 Return한다</li>
<li>Spring ViewResolver를 거치지 않고 ViewName을 설정하려면 redirect: 나 forward: 를 ViewName에 추가한다</li>
</ul>
</li>
</ol>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a
                        class="post-action-btn btn btn--disabled"
                        aria-hidden="true"
                    >
                        
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/11/30/Spring-Spring-PSA/"
                    data-tooltip="Spring-Spring PSA"
                    aria-label="NEXT: Spring-Spring PSA"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://kimyechan.github.io/2020/11/30/Spring-Spring-MVC-1-MVC-Framework-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://kimyechan.github.io/2020/11/30/Spring-Spring-MVC-1-MVC-Framework-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://kimyechan.github.io/2020/11/30/Spring-Spring-MVC-1-MVC-Framework-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Yechan Kim. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    <a
                        class="post-action-btn btn btn--disabled"
                        aria-hidden="true"
                    >
                        
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/11/30/Spring-Spring-PSA/"
                    data-tooltip="Spring-Spring PSA"
                    aria-label="NEXT: Spring-Spring PSA"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://kimyechan.github.io/2020/11/30/Spring-Spring-MVC-1-MVC-Framework-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://kimyechan.github.io/2020/11/30/Spring-Spring-MVC-1-MVC-Framework-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://kimyechan.github.io/2020/11/30/Spring-Spring-MVC-1-MVC-Framework-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://kimyechan.github.io/2020/11/30/Spring-Spring-MVC-1-MVC-Framework-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84/"
                        aria-label="Share on Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://kimyechan.github.io/2020/11/30/Spring-Spring-MVC-1-MVC-Framework-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84/"
                        aria-label="Share on Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=https://kimyechan.github.io/2020/11/30/Spring-Spring-MVC-1-MVC-Framework-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84/"
                        aria-label="Share on Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">Yechan Kim</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'https://kimyechan.github.io/2020/11/30/Spring-Spring-MVC-1-MVC-Framework-%EC%A7%81%EC%A0%91%EA%B5%AC%ED%98%84/';
              
            this.page.identifier = '2020/11/30/Spring-Spring-MVC-1-MVC-Framework-직접구현/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'xhandev';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    




    </body>
</html>
