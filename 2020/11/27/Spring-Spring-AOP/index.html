
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Java Server Developer">
    <title>Spring-Spring AOP - Java Server Developer</title>
    <meta name="author" content="Yechan Kim">
    
    
    
    <script type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Yechan Kim","sameAs":["https://github.com/","http://stackoverflow.com/users","https://twitter.com/","https://facebook.com/","https://plus.google.com/","https://www.linkedin.com/profile/","mailto"]},"articleBody":"\n스프링 AOP(Aspect Oriented Programming)AOPAOP는 Asepect Oriented Programming의 약자로 관점 지향 프로그래밍이라고 불린다. 관점 지향은 어떤 로직을 기준으로 핵심적인 관점, 부가적인 관점으로 나누어서 보고 부가적인 관점을 각각 따로 분리해서 모듈화하겠다는 것이다.\n예로들어 핵심적인 관점은 우리가 적용하고자 하는 핵심 비지니스 로직이 된다. 또한 부가적인 관점은 핵심 로직외에 행해지는 데이터베이스 연결, 로깅, 파일 입출력등이 있다.\nAOP에서 각 관점을 기준으로 로직을 모듈화한다는 것은 코드를 부분적으로 나누어서 모듈화하겠다는 의미다. 이때, 소스 코드상에서 핵심 비지니스 로직(Core Concerns)외에 계속 반복해서 쓰는 코드들을 발견할 수 있는데 이것을 흩어진 관심사(Crosscutting Concerns)라 부른다. \n\n위와 같이 흩어진 관심사(Crosscutting Concerns)를 Aspect로 모듈화하고 핵심적인 비지니스 로직(Core concerns)에서 분리하여 재사용하겠다는 것이 AOP이다.\nAOP 관련 용어\n조인 포인트(JoinPoint) : 클라이언트가 호출하는 모든 비지니스 메소드, 조인포인트 중에서 포인트컷이 되기때문에 포인트 컷의 후보로 생각할 수 있다.\n포인트 컷(Pointcut) : 특정 조건에 의해 필터링된 조인 포인트, 수 많은 조인 포인트 중에 특정 메소드에서만 Advice를 수행시키기 위해서 사용된다\n어드바이스(Advice) : Crosscutting Concern에 해당하는 공통 기능의 코드\n애스펙트(Aspect) : 포인트 컷과 어드바이스의 결합이다. 어떤 포인트 컷 메소드에 대해 어떤 어드바이스 메소드가 실행할 지 결정한다.\n위빙(Weaving) : 핵심 비지니스 로직과 Aspect를 연결하여 Advised Object를 만드는 과정\ncomplie time\nload time\nruntime\n\n\n\nAOP 구현 방법\n컴파일\n\nA.java —— (AOP) —–&gt; A.class \n컴파일을 할 때 중간에 공통 로직을 끼워 넣는다\n컴파일하기 전 코드에는 해당 로직이 없지만, 컴파일이 완료되면 해당 로직을 가지고있는 상태이다\nAspectJ를 이용해서 만들어진다\n\n\n바이트코드 조작\n\nA.java —-&gt; A.class —-&gt; (AOP) —-&gt; 메모리\nload time에서 ClassLoader가 A.class를 읽어온다\n읽어와서 메모리에 올릴 때 공통 로직이 들어가도록 조작한다\nAspectJ를 이용해서 만들어진다\n\n\n프록시 패턴\n\nRuntime에서 구현하는 방식\n프록시 패턴을 적용하여 실제 객체가 실행되는 것이 아닌 실제 객체를 감싸고 있는 프록시 객체를 Runtime에 생성\n프록시 객체는 Aspect가 적용되어있고 Core Concern이 들어있는 실제 객체를 reference하고 있다\nAOP가 적용된 객체를 요청할 때 실제 객체가 아닌 프록시 객체가 실행된다.\nAspectJ로 만들어져 있으며 SPRING AOP는 이 방식으로 구현되어있다.\n\n\n\nSpring AOP스프링 AOP 특징\n프록시 기반의 AOP 구현체\n스프링 빈에만 AOP를 적용할 수 있다\n모든 AOP 기능을 제공하는 것이 목적이 아니라, Spring IoC와 연동하여 어플리케이션의 문제에 대한 해결책을 제공하는 것이 목적\n\n프록시 패턴\n접근 제어 또는 부가기능 추가\n  \n\n인터페이스에 대해서 핵심 비지니스 로직만으로 구성되어진 실제 객체를 만든다\n인터페이스에 대해서 또 하나의 Proxy 구현체를 만든다\n이 구현체에는 부가기능이 추가있으며 실제 객체를 참조하여 실제 객체의 비지니스 로직을 실행 시킬 수 있다\n클라이언트는 객체를 인터페이스를 통해서 접근하게 되며, 실제객체가 직접 실행되는 것이 아닌 Proxy객체를 통해서 부가기능을 수행하고 간접적으로 실행된다.\n\n\n\n프록시 패턴을 적용 (Spring AOP를 사용하지 않음)\nEventService Interface\n  1234567public interface EventService &#123;    void createEvent();    void publishEvent();    void deleteEvent();&#125;\n\nEventService 구현체 (핵심 비지니스 로직 수행)\n  123456789101112131415161718192021222324252627@Servicepublic class SimpleEventService implements EventService&#123;    @Override    public void createEvent() &#123;        try &#123;            Thread.sleep(1000);        &#125; catch (InterruptedException e) &#123;            e.printStackTrace();        &#125;        System.out.println(&quot;Created an event&quot;);    &#125;    @Override    public void publishEvent() &#123;        try &#123;            Thread.sleep(1000);        &#125; catch (InterruptedException e) &#123;            e.printStackTrace();        &#125;        System.out.println(&quot;Publish an event&quot;);    &#125;    public void deleteEvent() &#123;        System.out.println(&quot;Delete an event&quot;);    &#125;&#125;\nEventService의 Proxy 구현체 (부가기능 + 핵심 로직 객체 참조)\n  @Primary로 SimpleEventService가 아닌 ProxySimpleEventService이 실행됨\n  1234567891011121314151617181920212223242526@Primary@Servicepublic class ProxySimpleEventService implements EventService&#123;    @Autowired    SimpleEventService simpleEventService;    @Override    public void createEvent() &#123;        long begin = System.currentTimeMillis();        simpleEventService.createEvent();        System.out.println(System.currentTimeMillis() - begin);    &#125;    @Override    public void publishEvent() &#123;        long begin = System.currentTimeMillis();        simpleEventService.publishEvent();        System.out.println(System.currentTimeMillis() - begin);    &#125;    @Override    public void deleteEvent() &#123;        simpleEventService.deleteEvent();    &#125;&#125;\n\n\n\n문제점\n매번 프록시 패턴을 적용해서 프록시 클래스를 작성해야한다\n여러 클래스 여러 메소드들에 적용할려면 반복적인 작업이 증가한다\n객체들관의 관계도 복잡하다\n\n스프링 AOP 등장\n스프링 IoC컨테이너가 제공하는 기반 시설과 Dynamic 프록시를 사용하여 여러 복잡한 문제 해결\n동적 프록시 : 동적으로 프록시 객체를 생성하는 방법\n자바가 제공하는 방법은 인터페이스 기반 프록시 생성\nCGlib은 클래스 기반 프록시도 지원\n\n\n스프링 IoC: 기존 빈을 대체하는 동적 프록시 빈을 만들어 등록해준다\n클라이언트 코드에 변경이 없다\n\n\n\n스프링 AOP 적용해서 개선스프링 AOP는 Spring Container에 등록된 Bean들만 적용된다\n\nPointcut을 Annotation 기반으로 작성\n  12345@Documented@Retention(RetentionPolicy.CLASS)@Target(ElementType.METHOD)public @interface PerfLogging &#123;&#125;\n\nAspect 작성 (Around 방식을 적용한 Advice 메소드 작성)\n  1234567891011121314151617@Component@Aspectpublic class PerfAspect &#123;    @Around(&quot;@annotation(PerfLogging)&quot;)    public Object logPerf(ProceedingJoinPoint pjp) throws Throwable &#123;        long begin = System.currentTimeMillis();        Object retVal = pjp.proceed();        System.out.println(System.currentTimeMillis() - begin);        return retVal;    &#125;    @Before(&quot;bean(simpleEventService)&quot;)    public void hello()&#123;        System.out.println(&quot;hello&quot;);    &#125;&#125;\n\nAround방식은 핵심 비지니스로직 실행 권한을 ProceedingJoinPoint로 받아온다 (Spring Container가 받아옴)\n받아온 객체를 실행하기 전 후에 작업을 진행한다\n받아온 객체가 return값을 가지고 있으면 Advice메소드에서 그 값을 return해 주어야한다\n\n\nAOP를 적용할 Pointcut메소드를 지정한다(메소드 위에 어노테이션 설정)\n  1234567891011121314151617181920212223242526272829@Servicepublic class SimpleEventService implements EventService&#123;    @PerfLogging    @Override    public void createEvent() &#123;        try &#123;            Thread.sleep(1000);        &#125; catch (InterruptedException e) &#123;            e.printStackTrace();        &#125;        System.out.println(&quot;Created an event&quot;);    &#125;    @PerfLogging    @Override    public void publishEvent() &#123;        try &#123;            Thread.sleep(1000);        &#125; catch (InterruptedException e) &#123;            e.printStackTrace();        &#125;        System.out.println(&quot;Publish an event&quot;);    &#125;    @Override    public void deleteEvent() &#123;        System.out.println(&quot;Delete an event&quot;);    &#125;&#125;\n\n\n\nPointcut 정의 방식\nexecution 설정 방식\n\n사용 예\n  1@Around(&quot;execution(* com.example..*.EventService.*(..))&quot;)\n적용 규칙\n  \n\n\n\nbean 설정 방식\n\n사용 예\n  적용할 빈 이름을 직접 입력\n  1@Around(&quot;bean(simpleEventService)&quot;)\n\n\n\nannotation 설정 방식 (위에서 설명)\n\n\nAdvice 실행 시점\nBefore\n\n핵심 비지니스 로직 실행 전에 실행\n실행 예  1234567@Before(&quot;execution(* com.rubypaper.biz..*Impl.*(..))&quot;)public void printLog(JoinPoint jp) &#123;    String method = jp.getSignature().getName();    // 클라이언트가 호출한 메소드 이름    Object[] args = jp.getArgs();                   // 클라이언트가 전달한 인자 정보    System.out.println(&quot;&lt;사전 처리&gt; &quot; + method + &quot;비지니스 로직 수행 전 동작&quot; + &quot;() 메소드 ARGS 정보 : &quot; + args[0].toString());&#125;\n\n\nAfter\n\n핵심 비지니스 로직 실행 후에 실행\n실행 예  1234567@After(&quot;execution(* com.rubypaper.biz..*Impl.*(..))&quot;)public void printLog(JoinPoint jp) &#123;    String method = jp.getSignature().getName();    // 클라이언트가 호출한 메소드 이름    Object[] args = jp.getArgs();                   // 클라이언트가 전달한 인자 정보    System.out.println(&quot;&lt;사후 처리&gt; &quot; + method + &quot;비지니스 로직 수행 후 동작&quot; + &quot;() 메소드 ARGS 정보 : &quot; + args[0].toString());&#125;\n\n\nAfter Returning\n\n핵심 비지니스 로직 실행한 후 반환된 객체를 Advice에서 받아와서 실행\n실행 예  1234567891011@AfterReturning(pointcut = &quot;!void com.rubypaper.biz..*Impl.*(..))&quot;, returning = &quot;returnObj&quot;)public void afterLog(Object returnObj) &#123;    System.out.println(&quot;&lt;사후 처리&gt; 비지니스 로직 리턴 값 : &quot; + returnObj.toString());    if (returnObj instanceof UserVO) &#123;        UserVO user = (UserVO) returnObj;        if(user.getRole().equals(&quot;ADMIN&quot;)) &#123;            System.out.println(user.getName() + &quot;님은 관리자 화면으로 바로 이동........&quot;);        &#125;    &#125;&#125;\n핵심 비지니스 로직에서 반환된 객체를 returnObj로 받아온다\n\n\nAfter Throwing\n\n핵심 비지니스 로직 실행헌 후 예외가 발생하면 예외객체를 받아와서 실행\n실행 예12345678910111213141516 @AfterThrowing(pointcut = &quot;execution(* com.rubypaper.biz..*Impl.*(..))&quot;, throwing = &quot;exceptionObj&quot;)public void exceptionLog(JoinPoint jp, Exception exceptionObj) &#123;    String method = jp.getSignature().getName();    // 클라이언트가 호출한 메소드 이름    System.out.println(&quot;[ 예외처리 ]&quot;+ method +&quot; 메소드 수행 중  예외 발생&quot;);    if(exceptionObj instanceof IllegalArgumentException)&#123;        System.out.println(&quot;0 번 게시 글을 등록할 수 없습니다&quot;);    &#125; else if (exceptionObj instanceof ArithmeticException) &#123;        System.out.println(&quot;0 으로 숫자를 나눌 수 없습니다&quot;);    &#125; else if (exceptionObj instanceof SQLException) &#123;        System.out.println(&quot;SQL 구문에 오류가 있습니다&quot;);    &#125; else &#123;        System.out.println(&quot;문제 발생 !! 시스템을 잠시 종료합니다&quot;);    &#125;&#125;\n\n예외객체를 exceptionObj로 받아온다\n\n\n\n\nAround\n\n위에서 설명\n\n\n\n\nAdvice에서 Pointcut에 해당되는 메소드에 대한 정보를 얻기 위해 JoinPoint라는 객체를 받아올 수 있다. Around만 예외적으로 ProceedJoinPoint라는 객체를 통해서 받아온다\n\n","dateCreated":"2020-11-27T12:34:12+09:00","dateModified":"2020-11-27T15:15:56+09:00","datePublished":"2020-11-27T12:34:12+09:00","description":"","headline":"Spring-Spring AOP","image":[],"mainEntityOfPage":{"@type":"WebPage","@id":"https://kimyechan.github.io/2020/11/27/Spring-Spring-AOP/"},"publisher":{"@type":"Organization","name":"Yechan Kim","sameAs":["https://github.com/","http://stackoverflow.com/users","https://twitter.com/","https://facebook.com/","https://plus.google.com/","https://www.linkedin.com/profile/","mailto"]},"url":"https://kimyechan.github.io/2020/11/27/Spring-Spring-AOP/","keywords":"Web, Spring, AOP"}</script>
    <meta name="description" content="스프링 AOP(Aspect Oriented Programming)AOPAOP는 Asepect Oriented Programming의 약자로 관점 지향 프로그래밍이라고 불린다. 관점 지향은 어떤 로직을 기준으로 핵심적인 관점, 부가적인 관점으로 나누어서 보고 부가적인 관점을 각각 따로 분리해서 모듈화하겠다는 것이다. 예로들어 핵심적인 관점은 우리가 적용하고">
<meta property="og:type" content="blog">
<meta property="og:title" content="Spring-Spring AOP">
<meta property="og:url" content="https://kimyechan.github.io/2020/11/27/Spring-Spring-AOP/index.html">
<meta property="og:site_name" content="Java Server Developer">
<meta property="og:description" content="스프링 AOP(Aspect Oriented Programming)AOPAOP는 Asepect Oriented Programming의 약자로 관점 지향 프로그래밍이라고 불린다. 관점 지향은 어떤 로직을 기준으로 핵심적인 관점, 부가적인 관점으로 나누어서 보고 부가적인 관점을 각각 따로 분리해서 모듈화하겠다는 것이다. 예로들어 핵심적인 관점은 우리가 적용하고">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://user-images.githubusercontent.com/12459864/100409913-7af22900-30b0-11eb-8a76-dbf70a7e0561.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/12459864/100412351-c78d3280-30b7-11eb-8128-07e4a4e21ee8.png">
<meta property="og:image" content="https://user-images.githubusercontent.com/12459864/100415689-18088e00-30c0-11eb-8593-38f8d6a46e7d.png">
<meta property="article:published_time" content="2020-11-27T03:34:12.000Z">
<meta property="article:modified_time" content="2020-11-27T06:15:56.934Z">
<meta property="article:author" content="Yechan Kim">
<meta property="article:tag" content="Web">
<meta property="article:tag" content="Spring">
<meta property="article:tag" content="AOP">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://user-images.githubusercontent.com/12459864/100409913-7af22900-30b0-11eb-8a76-dbf70a7e0561.png">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    

    

    
        
    
</head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="5">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Java Server Developer
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="5">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="Search"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="http://stackoverflow.com/users"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Stack Overflow"
                        >
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://facebook.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://plus.google.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Google +"
                        >
                        <i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Google +</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/mailto"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="5"
                 class="
                        hasCoverMetaIn
                        ">
                
<article class="post">
    
    
        <div class="post-header main-content-wrap text-left">
    
        <h1 class="post-title">
            Spring-Spring AOP
        </h1>
    
    
        <div class="post-meta">
    <time datetime="2020-11-27T12:34:12+09:00">
	
		    Nov 27, 2020
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/categories/Web/">Web</a>, <a class="category-link" href="/categories/Web/Spring/">Spring</a>, <a class="category-link" href="/categories/Web/Spring/Core-Concept/">Core Concept</a>, <a class="category-link" href="/categories/Web/Spring/Core-Concept/AOP/">AOP</a>


    
</div>

    
</div>

    
    <div class="post-content markdown">
        <div class="main-content-wrap">
            <hr>
<h1 id="스프링-AOP-Aspect-Oriented-Programming"><a href="#스프링-AOP-Aspect-Oriented-Programming" class="headerlink" title="스프링 AOP(Aspect Oriented Programming)"></a>스프링 AOP(Aspect Oriented Programming)</h1><h2 id="AOP"><a href="#AOP" class="headerlink" title="AOP"></a>AOP</h2><p>AOP는 Asepect Oriented Programming의 약자로 관점 지향 프로그래밍이라고 불린다. <br/><br>관점 지향은 어떤 로직을 기준으로 핵심적인 관점, 부가적인 관점으로 나누어서 보고 <br/><br>부가적인 관점을 각각 따로 분리해서 모듈화하겠다는 것이다.</p>
<p>예로들어 핵심적인 관점은 우리가 적용하고자 하는 핵심 비지니스 로직이 된다. <br/><br>또한 부가적인 관점은 핵심 로직외에 행해지는 데이터베이스 연결, 로깅, 파일 입출력등이 있다.</p>
<p>AOP에서 각 관점을 기준으로 로직을 모듈화한다는 것은 코드를 부분적으로 나누어서 모듈화하겠다는 의미다. <br/><br>이때, 소스 코드상에서 핵심 비지니스 로직(Core Concerns)외에 계속 반복해서 쓰는 코드들을 발견할 수 있는데 이것을 흩어진 관심사(Crosscutting Concerns)라 부른다. </p>
<p><img src="https://user-images.githubusercontent.com/12459864/100409913-7af22900-30b0-11eb-8a76-dbf70a7e0561.png" alt="스크린샷 2020-11-27 오후 12 59 42"></p>
<p>위와 같이 흩어진 관심사(Crosscutting Concerns)를 Aspect로 모듈화하고 핵심적인 비지니스 로직(Core concerns)에서 분리하여 재사용하겠다는 것이 AOP이다.</p>
<h3 id="AOP-관련-용어"><a href="#AOP-관련-용어" class="headerlink" title="AOP 관련 용어"></a>AOP 관련 용어</h3><ul>
<li>조인 포인트(JoinPoint) : 클라이언트가 호출하는 모든 비지니스 메소드, 조인포인트 중에서 포인트컷이 되기때문에 포인트 컷의 후보로 생각할 수 있다.</li>
<li>포인트 컷(Pointcut) : 특정 조건에 의해 필터링된 조인 포인트, 수 많은 조인 포인트 중에 특정 메소드에서만 Advice를 수행시키기 위해서 사용된다</li>
<li>어드바이스(Advice) : Crosscutting Concern에 해당하는 공통 기능의 코드</li>
<li>애스펙트(Aspect) : 포인트 컷과 어드바이스의 결합이다. 어떤 포인트 컷 메소드에 대해 어떤 어드바이스 메소드가 실행할 지 결정한다.</li>
<li>위빙(Weaving) : 핵심 비지니스 로직과 Aspect를 연결하여 Advised Object를 만드는 과정<ol>
<li>complie time</li>
<li>load time</li>
<li>runtime</li>
</ol>
</li>
</ul>
<h3 id="AOP-구현-방법"><a href="#AOP-구현-방법" class="headerlink" title="AOP 구현 방법"></a>AOP 구현 방법</h3><ol>
<li><p>컴파일</p>
<ul>
<li>A.java —— (AOP) —–&gt; A.class </li>
<li>컴파일을 할 때 중간에 공통 로직을 끼워 넣는다</li>
<li>컴파일하기 전 코드에는 해당 로직이 없지만, 컴파일이 완료되면 해당 로직을 가지고<br>있는 상태이다</li>
<li>AspectJ를 이용해서 만들어진다</li>
</ul>
</li>
<li><p>바이트코드 조작</p>
<ul>
<li>A.java —-&gt; A.class —-&gt; (AOP) —-&gt; 메모리</li>
<li>load time에서 ClassLoader가 A.class를 읽어온다</li>
<li>읽어와서 메모리에 올릴 때 공통 로직이 들어가도록 조작한다</li>
<li>AspectJ를 이용해서 만들어진다</li>
</ul>
</li>
<li><p>프록시 패턴</p>
<ul>
<li>Runtime에서 구현하는 방식</li>
<li>프록시 패턴을 적용하여 실제 객체가 실행되는 것이 아닌 실제 객체를 감싸고 있는 프록시 객체를 Runtime에 생성</li>
<li>프록시 객체는 Aspect가 적용되어있고 Core Concern이 들어있는 실제 객체를 reference하고 있다</li>
<li>AOP가 적용된 객체를 요청할 때 실제 객체가 아닌 프록시 객체가 실행된다.</li>
<li>AspectJ로 만들어져 있으며 SPRING AOP는 이 방식으로 구현되어있다.</li>
</ul>
</li>
</ol>
<h2 id="Spring-AOP"><a href="#Spring-AOP" class="headerlink" title="Spring AOP"></a>Spring AOP</h2><h3 id="스프링-AOP-특징"><a href="#스프링-AOP-특징" class="headerlink" title="스프링 AOP 특징"></a>스프링 AOP 특징</h3><ul>
<li>프록시 기반의 AOP 구현체</li>
<li>스프링 빈에만 AOP를 적용할 수 있다</li>
<li>모든 AOP 기능을 제공하는 것이 목적이 아니라, Spring IoC와 연동하여 어플리케이션의 문제에 대한 해결책을 제공하는 것이 목적</li>
</ul>
<h3 id="프록시-패턴"><a href="#프록시-패턴" class="headerlink" title="프록시 패턴"></a>프록시 패턴</h3><ul>
<li><p>접근 제어 또는 부가기능 추가</p>
<p>  <img src="https://user-images.githubusercontent.com/12459864/100412351-c78d3280-30b7-11eb-8128-07e4a4e21ee8.png" alt="image"></p>
<ul>
<li>인터페이스에 대해서 핵심 비지니스 로직만으로 구성되어진 실제 객체를 만든다</li>
<li>인터페이스에 대해서 또 하나의 Proxy 구현체를 만든다</li>
<li>이 구현체에는 부가기능이 추가있으며 실제 객체를 참조하여 실제 객체의 비지니스 로직을 실행 시킬 수 있다</li>
<li>클라이언트는 객체를 인터페이스를 통해서 접근하게 되며, 실제객체가 직접 실행되는 것이 아닌 Proxy객체를 통해서 부가기능을 수행하고 간접적으로 실행된다.</li>
</ul>
</li>
</ul>
<h3 id="프록시-패턴을-적용-Spring-AOP를-사용하지-않음"><a href="#프록시-패턴을-적용-Spring-AOP를-사용하지-않음" class="headerlink" title="프록시 패턴을 적용 (Spring AOP를 사용하지 않음)"></a>프록시 패턴을 적용 (Spring AOP를 사용하지 않음)</h3><ul>
<li><p>EventService Interface</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">EventService</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">createEvent</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">publishEvent</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">deleteEvent</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>EventService 구현체 (핵심 비지니스 로직 수행)</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleEventService</span> <span class="keyword">implements</span> <span class="title">EventService</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createEvent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Created an event&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">publishEvent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Publish an event&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteEvent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Delete an event&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>EventService의 Proxy 구현체 (부가기능 + 핵심 로직 객체 참조)</p>
<p>  @Primary로 SimpleEventService가 아닌 ProxySimpleEventService이 실행됨</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Primary</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ProxySimpleEventService</span> <span class="keyword">implements</span> <span class="title">EventService</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    SimpleEventService simpleEventService;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createEvent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> begin = System.currentTimeMillis();</span><br><span class="line">        simpleEventService.createEvent();</span><br><span class="line">        System.out.println(System.currentTimeMillis() - begin);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">publishEvent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> begin = System.currentTimeMillis();</span><br><span class="line">        simpleEventService.publishEvent();</span><br><span class="line">        System.out.println(System.currentTimeMillis() - begin);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteEvent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        simpleEventService.deleteEvent();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="문제점"><a href="#문제점" class="headerlink" title="문제점"></a>문제점</h3><ul>
<li>매번 프록시 패턴을 적용해서 프록시 클래스를 작성해야한다</li>
<li>여러 클래스 여러 메소드들에 적용할려면 반복적인 작업이 증가한다</li>
<li>객체들관의 관계도 복잡하다</li>
</ul>
<h3 id="스프링-AOP-등장"><a href="#스프링-AOP-등장" class="headerlink" title="스프링 AOP 등장"></a>스프링 AOP 등장</h3><ul>
<li>스프링 IoC컨테이너가 제공하는 기반 시설과 Dynamic 프록시를 사용하여 여러 복잡한 문제 해결</li>
<li>동적 프록시 : 동적으로 프록시 객체를 생성하는 방법<ul>
<li>자바가 제공하는 방법은 인터페이스 기반 프록시 생성</li>
<li>CGlib은 클래스 기반 프록시도 지원</li>
</ul>
</li>
<li>스프링 IoC: 기존 빈을 대체하는 동적 프록시 빈을 만들어 등록해준다<ul>
<li>클라이언트 코드에 변경이 없다</li>
</ul>
</li>
</ul>
<h3 id="스프링-AOP-적용해서-개선"><a href="#스프링-AOP-적용해서-개선" class="headerlink" title="스프링 AOP 적용해서 개선"></a>스프링 AOP 적용해서 개선</h3><p><code>스프링 AOP는 Spring Container에 등록된 Bean들만 적용된다</code></p>
<ul>
<li><p>Pointcut을 Annotation 기반으로 작성</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.CLASS)</span></span><br><span class="line"><span class="meta">@Target(ElementType.METHOD)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> PerfLogging &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>Aspect 작성 (Around 방식을 적용한 Advice 메소드 작성)</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Aspect</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PerfAspect</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Around(&quot;@annotation(PerfLogging)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">logPerf</span><span class="params">(ProceedingJoinPoint pjp)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        <span class="keyword">long</span> begin = System.currentTimeMillis();</span><br><span class="line">        Object retVal = pjp.proceed();</span><br><span class="line">        System.out.println(System.currentTimeMillis() - begin);</span><br><span class="line">        <span class="keyword">return</span> retVal;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before(&quot;bean(simpleEventService)&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">hello</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;hello&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>Around방식은 핵심 비지니스로직 실행 권한을 ProceedingJoinPoint로 받아온다 (Spring Container가 받아옴)</li>
<li>받아온 객체를 실행하기 전 후에 작업을 진행한다</li>
<li>받아온 객체가 return값을 가지고 있으면 Advice메소드에서 그 값을 return해 주어야한다</li>
</ul>
</li>
<li><p>AOP를 적용할 Pointcut메소드를 지정한다(메소드 위에 어노테이션 설정)</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SimpleEventService</span> <span class="keyword">implements</span> <span class="title">EventService</span></span>&#123;</span><br><span class="line">    <span class="meta">@PerfLogging</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">createEvent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Created an event&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@PerfLogging</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">publishEvent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(<span class="string">&quot;Publish an event&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">deleteEvent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;Delete an event&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="Pointcut-정의-방식"><a href="#Pointcut-정의-방식" class="headerlink" title="Pointcut 정의 방식"></a>Pointcut 정의 방식</h3><ol>
<li><p>execution 설정 방식</p>
<ul>
<li><p>사용 예</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Around(&quot;execution(* com.example..*.EventService.*(..))&quot;)</span></span><br></pre></td></tr></table></figure></li>
<li><p>적용 규칙</p>
  <img width="740" alt="스크린샷 2020-11-27 오후 2 51 06" src="https://user-images.githubusercontent.com/12459864/100415689-18088e00-30c0-11eb-8593-38f8d6a46e7d.png">
</li>
</ul>
</li>
<li><p>bean 설정 방식</p>
<ul>
<li><p>사용 예</p>
<p>  적용할 빈 이름을 직접 입력</p>
  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Around(&quot;bean(simpleEventService)&quot;)</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p>annotation 설정 방식 (위에서 설명)</p>
</li>
</ol>
<h3 id="Advice-실행-시점"><a href="#Advice-실행-시점" class="headerlink" title="Advice 실행 시점"></a>Advice 실행 시점</h3><ol>
<li><p>Before</p>
<ul>
<li>핵심 비지니스 로직 실행 전에 실행</li>
<li>실행 예  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Before(&quot;execution(* com.rubypaper.biz..*Impl.*(..))&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printLog</span><span class="params">(JoinPoint jp)</span> </span>&#123;</span><br><span class="line">    String method = jp.getSignature().getName();    <span class="comment">// 클라이언트가 호출한 메소드 이름</span></span><br><span class="line">    Object[] args = jp.getArgs();                   <span class="comment">// 클라이언트가 전달한 인자 정보</span></span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;&lt;사전 처리&gt; &quot;</span> + method + <span class="string">&quot;비지니스 로직 수행 전 동작&quot;</span> + <span class="string">&quot;() 메소드 ARGS 정보 : &quot;</span> + args[<span class="number">0</span>].toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>After</p>
<ul>
<li>핵심 비지니스 로직 실행 후에 실행</li>
<li>실행 예  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@After(&quot;execution(* com.rubypaper.biz..*Impl.*(..))&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">printLog</span><span class="params">(JoinPoint jp)</span> </span>&#123;</span><br><span class="line">    String method = jp.getSignature().getName();    <span class="comment">// 클라이언트가 호출한 메소드 이름</span></span><br><span class="line">    Object[] args = jp.getArgs();                   <span class="comment">// 클라이언트가 전달한 인자 정보</span></span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;&lt;사후 처리&gt; &quot;</span> + method + <span class="string">&quot;비지니스 로직 수행 후 동작&quot;</span> + <span class="string">&quot;() 메소드 ARGS 정보 : &quot;</span> + args[<span class="number">0</span>].toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><p>After Returning</p>
<ul>
<li>핵심 비지니스 로직 실행한 후 반환된 객체를 Advice에서 받아와서 실행</li>
<li>실행 예  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@AfterReturning(pointcut = &quot;!void com.rubypaper.biz..*Impl.*(..))</span><span class="string">&quot;, returning = &quot;</span>returnObj<span class="string">&quot;)</span></span><br><span class="line"><span class="string">public void afterLog(Object returnObj) &#123;</span></span><br><span class="line"><span class="string">    System.out.println(&quot;</span>&lt;사후 처리&gt; 비지니스 로직 리턴 값 : <span class="string">&quot; + returnObj.toString());</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">    if (returnObj instanceof UserVO) &#123;</span></span><br><span class="line"><span class="string">        UserVO user = (UserVO) returnObj;</span></span><br><span class="line"><span class="string">        if(user.getRole().equals(&quot;</span>ADMIN<span class="string">&quot;)) &#123;</span></span><br><span class="line"><span class="string">            System.out.println(user.getName() + &quot;</span>님은 관리자 화면으로 바로 이동........<span class="string">&quot;);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure></li>
<li>핵심 비지니스 로직에서 반환된 객체를 returnObj로 받아온다</li>
</ul>
</li>
<li><p>After Throwing</p>
<ul>
<li>핵심 비지니스 로직 실행헌 후 예외가 발생하면 예외객체를 받아와서 실행</li>
<li>실행 예<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> <span class="meta">@AfterThrowing(pointcut = &quot;execution(* com.rubypaper.biz..*Impl.*(..))&quot;, throwing = &quot;exceptionObj&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">exceptionLog</span><span class="params">(JoinPoint jp, Exception exceptionObj)</span> </span>&#123;</span><br><span class="line">    String method = jp.getSignature().getName();    <span class="comment">// 클라이언트가 호출한 메소드 이름</span></span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;[ 예외처리 ]&quot;</span>+ method +<span class="string">&quot; 메소드 수행 중  예외 발생&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(exceptionObj <span class="keyword">instanceof</span> IllegalArgumentException)&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;0 번 게시 글을 등록할 수 없습니다&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (exceptionObj <span class="keyword">instanceof</span> ArithmeticException) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;0 으로 숫자를 나눌 수 없습니다&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (exceptionObj <span class="keyword">instanceof</span> SQLException) &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;SQL 구문에 오류가 있습니다&quot;</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;문제 발생 !! 시스템을 잠시 종료합니다&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>예외객체를 exceptionObj로 받아온다</li>
</ul>
</li>
</ul>
</li>
<li><p>Around</p>
<ul>
<li>위에서 설명</li>
</ul>
</li>
</ol>
<blockquote>
<p>Advice에서 Pointcut에 해당되는 메소드에 대한 정보를 얻기 위해 JoinPoint라는 객체를 받아올 수 있다. Around만 예외적으로 ProceedJoinPoint라는 객체를 통해서 받아온다</p>
</blockquote>

            


        </div>
    </div>
    <div id="post-footer" class="post-footer main-content-wrap">
        
            <div class="post-footer-tags">
                <span class="text-color-light text-small">TAGGED IN</span><br/>
                
    <a class="tag tag--primary tag--small t-none-link" href="/tags/AOP/" rel="tag">AOP</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/Spring/" rel="tag">Spring</a> <a class="tag tag--primary tag--small t-none-link" href="/tags/Web/" rel="tag">Web</a>

            </div>
        
        
            <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/11/27/Spring-Spring-IoC/"
                    data-tooltip="Spring-Spring IoC"
                    aria-label="PREVIOUS: Spring-Spring IoC"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/11/18/Algorithm-%EC%95%94%ED%98%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0/"
                    data-tooltip="Algorithm-암호 만들기"
                    aria-label="NEXT: Algorithm-암호 만들기"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://kimyechan.github.io/2020/11/27/Spring-Spring-AOP/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://kimyechan.github.io/2020/11/27/Spring-Spring-AOP/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://kimyechan.github.io/2020/11/27/Spring-Spring-AOP/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


        
        
            
                <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
            
        
    </div>
</article>



                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2020 Yechan Kim. All Rights Reserved.
    </span>
</footer>

            </div>
            
                <div id="bottom-bar" class="post-bottom-bar" data-behavior="5">
                    <div class="post-actions-wrap">
    <nav>
        <ul class="post-actions post-action-nav">
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/11/27/Spring-Spring-IoC/"
                    data-tooltip="Spring-Spring IoC"
                    aria-label="PREVIOUS: Spring-Spring IoC"
                >
                    
                        <i class="fa fa-angle-left" aria-hidden="true"></i>
                        <span class="hide-xs hide-sm text-small icon-ml">PREVIOUS</span>
                    </a>
            </li>
            <li class="post-action">
                
                    
                <a
                    class="post-action-btn btn btn--default tooltip--top"
                    href="/2020/11/18/Algorithm-%EC%95%94%ED%98%B8-%EB%A7%8C%EB%93%A4%EA%B8%B0/"
                    data-tooltip="Algorithm-암호 만들기"
                    aria-label="NEXT: Algorithm-암호 만들기"
                >
                    
                        <span class="hide-xs hide-sm text-small icon-mr">NEXT</span>
                        <i class="fa fa-angle-right" aria-hidden="true"></i>
                    </a>
            </li>
        </ul>
    </nav>
    <ul class="post-actions post-action-share">
        <li class="post-action hide-lg hide-md hide-sm">
            <a
                class="post-action-btn btn btn--default btn-open-shareoptions"
                href="#btn-open-shareoptions"
                aria-label="Share this post"
            >
                <i class="fa fa-share-alt" aria-hidden="true"></i>
            </a>
        </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://kimyechan.github.io/2020/11/27/Spring-Spring-AOP/"
                    title="Share on Facebook"
                    aria-label="Share on Facebook"
                >
                    <i class="fab fa-facebook" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://twitter.com/intent/tweet?text=https://kimyechan.github.io/2020/11/27/Spring-Spring-AOP/"
                    title="Share on Twitter"
                    aria-label="Share on Twitter"
                >
                    <i class="fab fa-twitter" aria-hidden="true"></i>
                </a>
            </li>
        
            
            
            <li class="post-action hide-xs">
                <a
                    class="post-action-btn btn btn--default"
                    target="new" href="https://plus.google.com/share?url=https://kimyechan.github.io/2020/11/27/Spring-Spring-AOP/"
                    title="Share on Google+"
                    aria-label="Share on Google+"
                >
                    <i class="fab fa-google-plus" aria-hidden="true"></i>
                </a>
            </li>
        
        
            
                <li class="post-action">
                    <a
                        class="post-action-btn btn btn--default"
                        href="#disqus_thread"
                        aria-label="Leave a comment"
                    >
                        <i class="fa fa-comment"></i>
                    </a>
                </li>
            
        
        <li class="post-action">
            
                <a class="post-action-btn btn btn--default" href="#" aria-label="Back to top">
            
                <i class="fa fa-list" aria-hidden="true"></i>
            </a>
        </li>
    </ul>
</div>


                </div>
                
    <div id="share-options-bar" class="share-options-bar" data-behavior="5">
        <i id="btn-close-shareoptions" class="fa fa-times"></i>
        <ul class="share-options">
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://www.facebook.com/sharer/sharer.php?u=https://kimyechan.github.io/2020/11/27/Spring-Spring-AOP/"
                        aria-label="Share on Facebook"
                    >
                        <i class="fab fa-facebook" aria-hidden="true"></i><span>Share on Facebook</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://twitter.com/intent/tweet?text=https://kimyechan.github.io/2020/11/27/Spring-Spring-AOP/"
                        aria-label="Share on Twitter"
                    >
                        <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
                    </a>
                </li>
            
                
                
                <li class="share-option">
                    <a
                        class="share-option-btn"
                        target="new"
                        href="https://plus.google.com/share?url=https://kimyechan.github.io/2020/11/27/Spring-Spring-AOP/"
                        aria-label="Share on Google+"
                    >
                        <i class="fab fa-google-plus" aria-hidden="true"></i><span>Share on Google+</span>
                    </a>
                </li>
            
        </ul>
    </div>


            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">Yechan Kim</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/jquery.js"></script>


<script src="/assets/js/jquery.fancybox.js"></script>


<script src="/assets/js/thumbs.js"></script>


<script src="/assets/js/tranquilpeak.js"></script>

<!--SCRIPTS END-->


    
        <script>
          var disqus_config = function() {
            this.page.url = 'https://kimyechan.github.io/2020/11/27/Spring-Spring-AOP/';
              
            this.page.identifier = '2020/11/27/Spring-Spring-AOP/';
              
          };
          (function() {
            var d = document, s = d.createElement('script');
            var disqus_shortname = 'xhandev';
            s.src = '//' + disqus_shortname + '.disqus.com/embed.js';

            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
          })();
        </script>
    




    </body>
</html>
